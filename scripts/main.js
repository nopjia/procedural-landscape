!function(e,t,n){function r(n,o){if(!t[n]){if(!e[n]){var a="function"==typeof require&&require;if(!o&&a)return a(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=t[n]={exports:{}};e[n][0].call(s.exports,function(t){var i=e[n][1][t];return r(i?i:t)},s,s.exports)}return t[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){var r=(e("./pointable"),e("gl-matrix")),i=r.vec3,o=r.mat3,a=r.mat4,s=(e("underscore"),t.exports=function(e,t){this.finger=e,this._center=null,this._matrix=null,this.type=t.type,this.prevJoint=t.prevJoint,this.nextJoint=t.nextJoint,this.width=t.width;var n=new Array(3);i.sub(n,t.nextJoint,t.prevJoint),this.length=i.length(n),this.basis=t.basis});s.prototype.left=function(){return this._left?this._left:(this._left=o.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0,this._left)},s.prototype.matrix=function(){if(this._matrix)return this._matrix;var e=this.basis,t=this._matrix=a.create();return t[0]=e[0][0],t[1]=e[0][1],t[2]=e[0][2],t[4]=e[1][0],t[5]=e[1][1],t[6]=e[1][2],t[8]=e[2][0],t[9]=e[2][1],t[10]=e[2][2],t[3]=this.center()[0],t[7]=this.center()[1],t[11]=this.center()[2],this.left()&&(t[0]*=-1,t[1]*=-1,t[2]*=-1),this._matrix},s.prototype.lerp=function(e,t){i.lerp(e,this.prevJoint,this.nextJoint,t)},s.prototype.center=function(){if(this._center)return this._center;var e=i.create();return this.lerp(e,.5),this._center=e,e},s.prototype.direction=function(){return[this.basis[2][0]*-1,this.basis[2][1]*-1,this.basis[2][2]*-1]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(e,t,n){var r=t.exports=function(e){this.pos=0,this._buf=[],this.size=e};r.prototype.get=function(e){if(void 0==e&&(e=0),!(e>=this.size||e>=this._buf.length))return this._buf[(this.pos-e-1)%this.size]},r.prototype.push=function(e){return this._buf[this.pos%this.size]=e,this.pos++}},{}],3:[function(e,t,n){var r=e("../protocol").chooseProtocol,i=e("events").EventEmitter,o=e("underscore"),a=t.exports=function(e){this.opts=o.defaults(e||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:a.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};a.defaultProtocolVersion=6,a.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.getScheme=function(){return"ws:"},a.prototype.getPort=function(){return 6437},a.prototype.setBackground=function(e){this.opts.background=e,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},a.prototype.setOptimizeHMD=function(e){this.opts.optimizeHMD=e,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},a.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},a.prototype.enableGestures=function(e){this.gesturesEnabled=!!e,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(e,t){this.connected&&(this.disconnect(),1001===e&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},a.prototype.startReconnection=function(){var e=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){e.reconnect()},500))},a.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},a.prototype.disconnect=function(e){if(e||this.stopReconnection(),this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0},a.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},a.prototype.handleData=function(e){var t,n=JSON.parse(e);void 0===this.protocol?(t=this.protocol=r(n),this.protocolVersionVerified=!0,this.emit("ready")):t=this.protocol(n),this.emit(t.type,t)},a.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0},a.prototype.send=function(e){this.socket.send(e)},a.prototype.reportFocus=function(e){this.connected&&this.focusedState!==e&&(this.focusedState=e,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},o.extend(a.prototype,i.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(e,t,n){var r=t.exports=e("./base"),i=e("underscore"),o=t.exports=function(e){r.call(this,e);var t=this;this.on("ready",function(){t.startFocusLoop()}),this.on("disconnect",function(){t.stopFocusLoop()})};i.extend(o.prototype,r.prototype),o.__proto__=r,o.prototype.useSecure=function(){return"https:"===location.protocol},o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},o.prototype.getPort=function(){return this.useSecure()?6436:6437},o.prototype.setupSocket=function(){var e=this,t=new WebSocket(this.getUrl());return t.onopen=function(){e.handleOpen()},t.onclose=function(t){e.handleClose(t.code,t.reason)},t.onmessage=function(t){e.handleData(t.data)},t.onerror=function(t){e.useSecure()&&"wss:"===e.scheme&&(e.scheme="ws:",e.port=6437,e.disconnect(),e.connect())},t},o.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var e=this,t=null;t="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0,void 0===e.windowVisible&&(e.windowVisible=void 0===t||document[t]===!1);var n=window.addEventListener("focus",function(t){e.windowVisible=!0,i()}),r=window.addEventListener("blur",function(t){e.windowVisible=!1,i()});this.on("disconnect",function(){window.removeEventListener("focus",n),window.removeEventListener("blur",r)});var i=function(){var n=void 0===t||document[t]===!1;e.reportFocus(n&&e.windowVisible)};i(),this.focusDetectorTimer=setInterval(i,100)}},o.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:24}],5:[function(e,t,n){var r=e("__browserify_process"),i=e("./frame"),o=e("./hand"),a=e("./pointable"),s=e("./finger"),c=e("./circular_buffer"),l=e("./pipeline"),u=e("events").EventEmitter,h=e("./gesture").gestureListener,d=e("./dialog"),p=e("underscore"),f=t.exports=function(t){var n="undefined"!=typeof r&&r.versions&&r.versions.node,o=this;t=p.defaults(t||{},{inNode:n}),this.inNode=t.inNode,t=p.defaults(t||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(e){o.lastConnectionFrame.valid&&o.emit("animationFrame",o.lastConnectionFrame),o.emit("frameEnd",e),o.loopWhileDisconnected&&(o.connection.focusedState!==!1||o.connection.opts.background)?window.requestAnimationFrame(o.onAnimationFrame):o.animationFrameRequested=!1},this.suppressAnimationLoop=t.suppressAnimationLoop,this.loopWhileDisconnected=t.loopWhileDisconnected,this.frameEventName=t.frameEventName,this.useAllPlugins=t.useAllPlugins,this.history=new c(200),this.lastFrame=i.Invalid,this.lastValidFrame=i.Invalid,this.lastConnectionFrame=i.Invalid,this.accumulatedGestures=[],this.checkVersion=t.checkVersion,void 0===t.connectionType?this.connectionType=e(this.inBrowser()?"./connection/browser":"./connection/node"):this.connectionType=t.connectionType,this.connection=new this.connectionType(t),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},t.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(t),this.setupConnectionEvents(),this.startAnimationLoop()};f.prototype.gesture=function(e,t){var n=h(this,e);return void 0!==t&&n.stop(t),n},f.prototype.setBackground=function(e){return this.connection.setBackground(e),this},f.prototype.setOptimizeHMD=function(e){return this.connection.setOptimizeHMD(e),this},f.prototype.inBrowser=function(){return!this.inNode},f.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},f.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},f.prototype.connect=function(){return this.connection.connect(),this},f.prototype.streaming=function(){return this.streamingCount>0},f.prototype.connected=function(){return!!this.connection.connected},f.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},f.prototype.disconnect=function(){return this.connection.disconnect(),this},f.prototype.frame=function(e){return this.history.get(e)||i.Invalid},f.prototype.loop=function(e){return e&&("function"==typeof e?this.on(this.frameEventName,e):this.setupFrameEvents(e)),this.connect()},f.prototype.addStep=function(e){this.pipeline||(this.pipeline=new l(this)),this.pipeline.addStep(e)},f.prototype.processFrame=function(e){e.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(e.gestures)),this.lastConnectionFrame=e,this.startAnimationLoop(),this.emit("deviceFrame",e)},f.prototype.processFinishedFrame=function(e){if(this.lastFrame=e,e.valid&&(this.lastValidFrame=e),e.controller=this,e.historyIdx=this.history.push(e),e.gestures){e.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var t=0;t!=e.gestures.length;t++)this.emit("gesture",e.gestures[t],e)}this.pipeline&&(e=this.pipeline.run(e),e||(e=i.Invalid)),this.emit("frame",e),this.emitHandEvents(e)},f.prototype.emitHandEvents=function(e){for(var t=0;t<e.hands.length;t++)this.emit("hand",e.hands[t])},f.prototype.setupFrameEvents=function(e){e.frame&&this.on("frame",e.frame),e.hand&&this.on("hand",e.hand)},f.prototype.setupConnectionEvents=function(){var e=this;this.connection.on("frame",function(t){e.processFrame(t)}),this.on(this.frameEventName,function(t){e.processFinishedFrame(t)});var t=function(){if(e.connection.opts.requestProtocolVersion<5&&0==e.streamingCount){e.streamingCount=1;var n={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};e.devices[n.id]=n,e.emit("deviceAttached",n),e.emit("deviceStreaming",n),e.emit("streamingStarted",n),e.connection.removeListener("frame",t)}},n=function(){if(e.streamingCount>0){for(var t in e.devices)e.emit("deviceStopped",e.devices[t]),e.emit("deviceRemoved",e.devices[t]);e.emit("streamingStopped",e.devices[t]),e.streamingCount=0;for(var t in e.devices)delete e.devices[t]}};this.connection.on("focus",function(){e.loopWhileDisconnected&&e.startAnimationLoop(),e.emit("focus")}),this.connection.on("blur",function(){e.emit("blur")}),this.connection.on("protocol",function(t){t.on("beforeFrameCreated",function(t){e.emit("beforeFrameCreated",t)}),t.on("afterFrameCreated",function(t,n){e.emit("afterFrameCreated",t,n)}),e.emit("protocol",t)}),this.connection.on("ready",function(){e.checkVersion&&!e.inNode&&e.checkOutOfDate(),e.emit("ready")}),this.connection.on("connect",function(){e.emit("connect"),e.connection.removeListener("frame",t),e.connection.on("frame",t)}),this.connection.on("disconnect",function(){e.emit("disconnect"),n()}),this.connection.on("deviceConnect",function(r){r.state?(e.emit("deviceConnected"),e.connection.removeListener("frame",t),e.connection.on("frame",t)):(e.emit("deviceDisconnected"),n())}),this.connection.on("deviceEvent",function(t){var n=t.state,r=e.devices[n.id],i={};for(var o in n)r&&r.hasOwnProperty(o)&&r[o]==n[o]||(i[o]=!0);e.devices[n.id]=n,i.attached&&e.emit(n.attached?"deviceAttached":"deviceRemoved",n),i.streaming&&(n.streaming?(e.streamingCount++,e.emit("deviceStreaming",n),1==e.streamingCount&&e.emit("streamingStarted",n),i.attached||e.emit("deviceConnected")):i.attached&&n.attached||(e.streamingCount--,e.emit("deviceStopped",n),0==e.streamingCount&&e.emit("streamingStopped",n),e.emit("deviceDisconnected")))}),this.on("newListener",function(e,t){"deviceConnected"!=e&&"deviceDisconnected"!=e||console.warn(e+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},f.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var e=this.connection.protocol.serviceVersion,t=this.connection.protocol.version,n=this.connectionType.defaultProtocolVersion;return n>t&&(console.warn("Your Protocol Version is v"+t+", this app was designed for v"+n),d.warnOutOfDate({sV:e,pV:t}),!0)},f._pluginFactories={},f.plugin=function(e,t){return this._pluginFactories[e]&&console.warn('Plugin "'+e+'" already registered'),this._pluginFactories[e]=t},f.plugins=function(){return p.keys(this._pluginFactories)};var m=function(e,t,n){["beforeFrameCreated","afterFrameCreated"].indexOf(t)!=-1?this.on(t,n):(this.pipeline||(this.pipeline=new l(this)),this._pluginPipelineSteps[e]||(this._pluginPipelineSteps[e]=[]),this._pluginPipelineSteps[e].push(this.pipeline.addWrappedStep(t,n)))},v=function(e,t,n){var r;switch(this._pluginExtendedMethods[e]||(this._pluginExtendedMethods[e]=[]),t){case"frame":r=i;break;case"hand":r=o;break;case"pointable":r=a,p.extend(s.prototype,n),p.extend(s.Invalid,n);break;case"finger":r=s;break;default:throw e+' specifies invalid object type "'+t+'" for prototypical extension'}p.extend(r.prototype,n),p.extend(r.Invalid,n),this._pluginExtendedMethods[e].push([r,n])};f.prototype.use=function(e,t){var n,r,i,o;if(r="function"==typeof e?e:f._pluginFactories[e],!r)throw"Leap Plugin "+e+" not found.";if(t||(t={}),this.plugins[e])return p.extend(this.plugins[e],t),this;this.plugins[e]=t,o=r.call(this,t);for(i in o)n=o[i],"function"==typeof n?m.call(this,e,i,n):v.call(this,e,i,n);return this},f.prototype.stopUsing=function(e){var t,n,r=this._pluginPipelineSteps[e],i=this._pluginExtendedMethods[e],o=0;if(this.plugins[e]){if(r)for(o=0;o<r.length;o++)this.pipeline.removeStep(r[o]);if(i)for(o=0;o<i.length;o++){t=i[o][0],n=i[o][1];for(var a in n)delete t.prototype[a],delete t.Invalid[a]}return delete this.plugins[e],this}},f.prototype.useRegisteredPlugins=function(){for(var e in f._pluginFactories)this.use(e)},p.extend(f.prototype,u.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(e,t,n){var r=e("__browserify_process"),i=t.exports=function(e,t){this.options=t||{},this.message=e,this.createElement()};i.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var e=document.createElement("div");this.element.appendChild(e),e.style.className="leapjs-dialog",e.style.display="inline-block",e.style.margin="auto",e.style.padding="8px",e.style.color="#222",e.style.background="#eee",e.style.borderRadius="4px",e.style.border="1px solid #999",e.style.textAlign="left",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.transition="box-shadow 1s linear",e.innerHTML=this.message,this.options.onclick&&e.addEventListener("click",this.options.onclick),this.options.onmouseover&&e.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&e.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&e.addEventListener("mousemove",this.options.onmousemove)},i.prototype.show=function(){return document.body.appendChild(this.element),this},i.prototype.hide=function(){return document.body.removeChild(this.element),this},i.warnOutOfDate=function(e){e||(e={});var t="http://developer.leapmotion.com?";e.returnTo=window.location.href;for(var n in e)t+=n+"="+encodeURIComponent(e[n])+"&";var r,o=function(e){if("leapjs-decline-upgrade"!=e.target.id){var n=window.open(t,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&n.focus()}return r.hide(),!0},a="This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";return r=new i(a,{onclick:o,onmousemove:function(e){e.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}}),r.show()},i.hasWarnedBones=!1,i.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!=typeof r&&r.versions&&r.versions.node||this.warnOutOfDate({reason:"bones"}))}},{__browserify_process:22}],7:[function(e,t,n){var r=e("./pointable"),i=e("./bone"),o=e("./dialog"),a=e("underscore"),s=t.exports=function(e){r.call(this,e),this.dipPosition=e.dipPosition,this.pipPosition=e.pipPosition,this.mcpPosition=e.mcpPosition,this.carpPosition=e.carpPosition,this.extended=e.extended,this.type=e.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],e.bases?this.addBones(e):o.warnBones()};a.extend(s.prototype,r.prototype),s.prototype.addBones=function(e){this.metacarpal=new i(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:e.bases[0]}),this.proximal=new i(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:e.bases[1]}),this.medial=new i(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:e.bases[2]}),this.distal=new i(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:e.btipPosition,basis:e.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},s.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},s.Invalid={valid:!1}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(e,t,n){var r=e("./hand"),i=e("./pointable"),o=e("./gesture").createGesture,a=e("gl-matrix"),s=a.mat3,c=a.vec3,l=e("./interaction_box"),u=e("./finger"),h=e("underscore"),d=t.exports=function(e){if(this.valid=!0,this.id=e.id,this.timestamp=e.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],e.interactionBox&&(this.interactionBox=new l(e.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=e.t,this._rotation=h.flatten(e.r),this._scaleFactor=e.s,this.data=e,this.type="frame",this.currentFrameRate=e.currentFrameRate,e.gestures)for(var t=0,n=e.gestures.length;t!=n;t++)this.gestures.push(o(e.gestures[t]));this.postprocessData(e)};d.prototype.postprocessData=function(e){e||(e=this.data);for(var t=0,n=e.hands.length;t!=n;t++){var o=new r(e.hands[t]);o.frame=this,this.hands.push(o),this.handsMap[o.id]=o}e.pointables=h.sortBy(e.pointables,function(e){return e.id});for(var a=0,s=e.pointables.length;a!=s;a++){var c=e.pointables[a],l=c.dipPosition?new u(c):new i(c);l.frame=this,this.addPointable(l)}},d.prototype.addPointable=function(e){if(this.pointables.push(e),this.pointablesMap[e.id]=e,(e.tool?this.tools:this.fingers).push(e),void 0!==e.handId&&this.handsMap.hasOwnProperty(e.handId)){var t=this.handsMap[e.handId];switch(t.pointables.push(e),(e.tool?t.tools:t.fingers).push(e),e.type){case 0:t.thumb=e;break;case 1:t.indexFinger=e;break;case 2:t.middleFinger=e;break;case 3:t.ringFinger=e;break;case 4:t.pinky=e}}},d.prototype.tool=function(e){var t=this.pointable(e);return t.tool?t:i.Invalid},d.prototype.pointable=function(e){return this.pointablesMap[e]||i.Invalid},d.prototype.finger=function(e){var t=this.pointable(e);return t.tool?i.Invalid:t},d.prototype.hand=function(e){return this.handsMap[e]||r.Invalid},d.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var n=this.rotationMatrix(e),r=.5*(n[0]+n[4]+n[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==t){var o=this.rotationAxis(e);i*=c.dot(o,c.normalize(c.create(),t))}return i},d.prototype.rotationAxis=function(e){return this.valid&&e.valid?c.normalize(c.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):c.create()},d.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return s.create();var t=s.transpose(s.create(),this._rotation);return s.multiply(s.create(),e._rotation,t)},d.prototype.scaleFactor=function(e){return this.valid&&e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},d.prototype.translation=function(e){return this.valid&&e.valid?c.subtract(c.create(),this._translation,e._translation):c.create()},d.prototype.toString=function(){var e="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(e+=" | Gesture count:("+this.gestures.length+")"),e+=" ]"},d.prototype.dump=function(){var e="";e+="Frame Info:<br/>",e+=this.toString(),e+="<br/><br/>Hands:<br/>";for(var t=0,n=this.hands.length;t!=n;t++)e+="  "+this.hands[t].toString()+"<br/>";e+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)e+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){e+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)e+="  "+this.gestures[o].toString()+"<br/>"}return e+="<br/><br/>Raw JSON:<br/>",e+=JSON.stringify(this.data)},d.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return i.Invalid},finger:function(){return i.Invalid},hand:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return c.create()},scaleFactor:function(){return 1},translation:function(){return c.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(e,t,n){var r=e("gl-matrix"),i=r.vec3,o=e("events").EventEmitter,a=e("underscore"),s=(n.createGesture=function(e){var t;switch(e.type){case"circle":t=new c(e);break;case"swipe":t=new l(e);break;case"screenTap":t=new u(e);break;case"keyTap":t=new h(e);break;default:throw"unknown gesture type"}return t.id=e.id,t.handIds=e.handIds.slice(),t.pointableIds=e.pointableIds.slice(),t.duration=e.duration,t.state=e.state,t.type=e.type,t},n.gestureListener=function(e,t){var n={},r={};e.on("gesture",function(e,i){if(e.type==t){if(("start"==e.state||"stop"==e.state)&&void 0===r[e.id]){var o=new s(e,i);r[e.id]=o,a.each(n,function(e,t){o.on(t,e)})}r[e.id].update(e,i),"stop"==e.state&&delete r[e.id]}});var i={start:function(e){return n.start=e,i},stop:function(e){return n.stop=e,i},complete:function(e){return n.stop=e,i},update:function(e){return n.update=e,i}};return i},n.Gesture=function(e,t){this.gestures=[e],this.frames=[t]});s.prototype.update=function(e,t){this.lastGesture=e,this.lastFrame=t,this.gestures.push(e),this.frames.push(t),this.emit(e.state,this)},s.prototype.translation=function(){return i.subtract(i.create(),this.lastGesture.startPosition,this.lastGesture.position)},a.extend(s.prototype,o.prototype);var c=function(e){this.center=e.center,this.normal=e.normal,this.progress=e.progress,this.radius=e.radius};c.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var l=function(e){this.startPosition=e.startPosition,this.position=e.position,this.direction=e.direction,this.speed=e.speed};l.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var u=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};u.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var h=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};h.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(e,t,n){var r=e("./pointable"),i=e("./bone"),o=e("gl-matrix"),a=o.mat3,s=o.vec3,c=e("underscore"),l=t.exports=function(e){this.id=e.id,this.palmPosition=e.palmPosition,this.direction=e.direction,this.palmVelocity=e.palmVelocity,this.palmNormal=e.palmNormal,this.sphereCenter=e.sphereCenter,this.sphereRadius=e.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],e.armBasis?this.arm=new i(this,{type:4,width:e.armWidth,prevJoint:e.elbow,nextJoint:e.wrist,basis:e.armBasis}):this.arm=null,this.tools=[],this._translation=e.t,this._rotation=c.flatten(e.r),this._scaleFactor=e.s,this.timeVisible=e.timeVisible,this.stabilizedPalmPosition=e.stabilizedPalmPosition,this.type=e.type,this.grabStrength=e.grabStrength,this.pinchStrength=e.pinchStrength,this.confidence=e.confidence};l.prototype.finger=function(e){var t=this.frame.finger(e);return t&&t.handId==this.id?t:r.Invalid},l.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var n=e.hand(this.id);if(!n.valid)return 0;var r=this.rotationMatrix(e),i=.5*(r[0]+r[4]+r[8]-1),o=Math.acos(i);if(o=isNaN(o)?0:o,void 0!==t){var a=this.rotationAxis(e);o*=s.dot(a,s.normalize(s.create(),t))}return o},l.prototype.rotationAxis=function(e){if(!this.valid||!e.valid)return s.create();var t=e.hand(this.id);return t.valid?s.normalize(s.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):s.create()},l.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return a.create();var t=e.hand(this.id);if(!t.valid)return a.create();var n=a.transpose(a.create(),this._rotation),r=a.multiply(a.create(),t._rotation,n);return r},l.prototype.scaleFactor=function(e){if(!this.valid||!e.valid)return 1;var t=e.hand(this.id);return t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},l.prototype.translation=function(e){if(!this.valid||!e.valid)return s.create();var t=e.hand(this.id);return t.valid?[this._translation[0]-t._translation[0],this._translation[1]-t._translation[1],this._translation[2]-t._translation[2]]:s.create()},l.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},l.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},l.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},l.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},l.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return r.Invalid},finger:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(e,t,n){t.exports={Controller:e("./controller"),Frame:e("./frame"),Gesture:e("./gesture"),Hand:e("./hand"),Pointable:e("./pointable"),Finger:e("./finger"),InteractionBox:e("./interaction_box"),CircularBuffer:e("./circular_buffer"),UI:e("./ui"),JSONProtocol:e("./protocol").JSONProtocol,glMatrix:e("gl-matrix"),mat3:e("gl-matrix").mat3,vec3:e("gl-matrix").vec3,loopController:void 0,version:e("./version.js"),_:e("underscore"),EventEmitter:e("events").EventEmitter,loop:function(e,t){return e&&void 0===t&&"[object Function]"==={}.toString.call(e)&&(t=e,e={}),this.loopController?e&&this.loopController.setupFrameEvents(e):this.loopController=new this.Controller(e),this.loopController.loop(t),this.loopController},plugin:function(e,t){this.Controller.plugin(e,t)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(e,t,n){var r=e("gl-matrix"),i=r.vec3,o=t.exports=function(e){this.valid=!0,this.center=e.center,this.size=e.size,this.width=e.size[0],this.height=e.size[1],this.depth=e.size[2]};o.prototype.denormalizePoint=function(e){return i.fromValues((e[0]-.5)*this.size[0]+this.center[0],(e[1]-.5)*this.size[1]+this.center[1],(e[2]-.5)*this.size[2]+this.center[2])},o.prototype.normalizePoint=function(e,t){var n=i.fromValues((e[0]-this.center[0])/this.size[0]+.5,(e[1]-this.center[1])/this.size[1]+.5,(e[2]-this.center[2])/this.size[2]+.5);return t&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},o.Invalid={valid:!1}},{"gl-matrix":23}],13:[function(e,t,n){var r=t.exports=function(e){this.steps=[],this.controller=e};r.prototype.addStep=function(e){this.steps.push(e)},r.prototype.run=function(e){for(var t=this.steps.length,n=0;n!=t&&e;n++)e=this.steps[n](e);return e},r.prototype.removeStep=function(e){var t=this.steps.indexOf(e);if(t===-1)throw"Step not found in pipeline";this.steps.splice(t,1)},r.prototype.addWrappedStep=function(e,t){var n=this.controller,r=function(r){var i,o,a;for(i="frame"==e?[r]:r[e+"s"]||[],o=0,a=i.length;o<a;o++)t.call(n,i[o]);return r};return this.addStep(r),r}},{}],14:[function(e,t,n){var r=e("gl-matrix"),i=(r.vec3,t.exports=function(e){this.valid=!0,this.id=e.id,this.handId=e.handId,this.length=e.length,this.tool=e.tool,this.width=e.width,this.direction=e.direction,this.stabilizedTipPosition=e.stabilizedTipPosition,this.tipPosition=e.tipPosition,this.tipVelocity=e.tipVelocity,this.touchZone=e.touchZone,this.touchDistance=e.touchDistance,this.timeVisible=e.timeVisible});i.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},i.prototype.hand=function(){
return this.frame.hand(this.handId)},i.Invalid={valid:!1}},{"gl-matrix":23}],15:[function(e,t,n){var r=e("./frame"),i=(e("./hand"),e("./pointable"),e("./finger"),e("underscore")),o=e("events").EventEmitter,a=function(e){this.type=e.type,this.state=e.state};n.chooseProtocol=function(e){var t;switch(e.version){case 1:case 2:case 3:case 4:case 5:case 6:t=s(e),t.sendBackground=function(e,n){e.send(t.encode({background:n}))},t.sendFocused=function(e,n){e.send(t.encode({focused:n}))},t.sendOptimizeHMD=function(e,n){e.send(t.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return t};var s=n.JSONProtocol=function(e){var t=function(e){if(e.event)return new a(e.event);t.emit("beforeFrameCreated",e);var n=new r(e);return t.emit("afterFrameCreated",n,e),n};return t.encode=function(e){return JSON.stringify(e)},t.version=e.version,t.serviceVersion=e.serviceVersion,t.versionLong="Version "+e.version,t.type="protocol",i.extend(t,o.prototype),t}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(e,t,n){n.UI={Region:e("./ui/region"),Cursor:e("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(e,t,n){t.exports=function(){return function(e){var t=e.pointables.sort(function(e,t){return e.z-t.z})[0];return t&&t.valid&&(e.cursorPosition=t.tipPosition),e}}},{}],18:[function(e,t,n){var r=e("events").EventEmitter,i=e("underscore"),o=t.exports=function(e,t){this.start=new Vector(e),this.end=new Vector(t),this.enteredFrame=null};o.prototype.hasPointables=function(e){for(var t=0;t!=e.pointables.length;t++){var n=e.pointables[t].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},o.prototype.listener=function(e){var t=this;return e&&e.nearThreshold&&this.setupNearRegion(e.nearThreshold),function(e){return t.updatePosition(e)}},o.prototype.clipper=function(){var e=this;return function(t){return e.updatePosition(t),e.enteredFrame?t:null}},o.prototype.setupNearRegion=function(e){var t=this.nearRegion=new o([this.start.x-e,this.start.y-e,this.start.z-e],[this.end.x+e,this.end.y+e,this.end.z+e]),n=this;t.on("enter",function(e){n.emit("near",e)}),t.on("exit",function(e){n.emit("far",e)}),n.on("exit",function(e){n.emit("near",e)})},o.prototype.updatePosition=function(e){return this.nearRegion&&this.nearRegion.updatePosition(e),this.hasPointables(e)&&null==this.enteredFrame?(this.enteredFrame=e,this.emit("enter",this.enteredFrame)):this.hasPointables(e)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),e},o.prototype.normalize=function(e){return new Vector([(e.x-this.start.x)/(this.end.x-this.start.x),(e.y-this.start.y)/(this.end.y-this.start.y),(e.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(e,t,n){var r=this.normalize(e),i=r.x,o=r.y;return i>1?i=1:i<-1&&(i=-1),o>1?o=1:o<-1&&(o=-1),[(i+1)/2*t,(1-o)/2*n,r.z]},i.extend(o.prototype,r.prototype)},{events:21,underscore:24}],19:[function(e,t,n){t.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(e,t,n){},{}],21:[function(e,t,n){function r(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}var i=e("__browserify_process");i.EventEmitter||(i.EventEmitter=function(){});var o=n.EventEmitter=i.EventEmitter,a="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=10;o.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},o.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(a(t)){for(var n=Array.prototype.slice.call(arguments,1),r=t.slice(),i=0,o=r.length;i<o;i++)r[i].apply(this,n);return!0}return!1},o.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(a(this._events[e])){if(!this._events[e].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:s,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},o.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(a(n)){var i=r(n,t);if(i<0)return this;n.splice(i,1),0==n.length&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},o.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},o.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?"function"==typeof e._events[t]?1:e._events[t].length:0}},{__browserify_process:22}],22:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],23:[function(e,t,n){!function(e){"use strict";var t={};"undefined"==typeof n?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports="undefined"!=typeof window?window:e:t.exports=n,function(e){if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(e){n=e},"undefined"!=typeof e&&(e.glMatrix=i);var o=Math.PI/180;i.toRadian=function(e){return e*o};var a={};a.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,n){return e[0]=t,e[1]=n,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},a.lerp=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e},a.random=function(e,t){t=t||1;var n=2*r()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},a.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},a.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},a.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},a.forEach=function(){var e=a.create();return function(t,n,r,i,o,a){var s,c;for(n||(n=2),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=a);var s={};s.create=function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},s.clone=function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.fromValues=function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},s.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},s.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},s.sub=s.subtract,s.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},s.mul=s.multiply,s.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},s.div=s.divide,s.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},s.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},s.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},s.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},s.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},s.dist=s.distance,s.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},s.len=s.length,s.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},s.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},s.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],c=n[2];return e[0]=i*c-o*s,e[1]=o*a-r*c,e[2]=r*s-i*a,e},s.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e},s.random=function(e,t){t=t||1;var n=2*r()*Math.PI,i=2*r()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=i*t,e},s.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12],e[1]=n[1]*r+n[5]*i+n[9]*o+n[13],e[2]=n[2]*r+n[6]*i+n[10]*o+n[14],e},s.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},s.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*o-c*i,h=l*i+c*r-a*o,d=l*o+a*i-s*r,p=-a*r-s*i-c*o;return e[0]=u*l+p*-a+h*-c-d*-s,e[1]=h*l+p*-s+d*-a-u*-c,e[2]=d*l+p*-c+u*-s-h*-a,e},s.rotateX=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.rotateY=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.rotateZ=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.forEach=function(){var e=s.create();return function(t,n,r,i,o,a){var s,c;for(n||(n=3),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),s.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=s);var c={};c.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},c.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},c.fromValues=function(e,t,r,i){var o=new n(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},c.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},c.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},c.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},c.sub=c.subtract,c.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},c.mul=c.multiply,c.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},c.div=c.divide,c.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},c.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},c.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},c.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},c.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)},c.dist=c.distance,c.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o},c.sqrDist=c.squaredDistance,c.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},c.len=c.length,c.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},c.sqrLen=c.squaredLength,c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},c.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},c.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},c.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),c.normalize(e,e),c.scale(e,e,t),e},c.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e},c.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*o-c*i,h=l*i+c*r-a*o,d=l*o+a*i-s*r,p=-a*r-s*i-c*o;return e[0]=u*l+p*-a+h*-c-d*-s,e[1]=h*l+p*-s+d*-a-u*-c,e[2]=d*l+p*-c+u*-s-h*-a,e},c.forEach=function(){var e=c.create();return function(t,n,r,i,o,a){var s,c;for(n||(n=4),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),c.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=c);var l={};l.create=function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},l.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},l.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},l.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null},l.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},l.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},l.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*s+o*c,e[1]=i*s+a*c,e[2]=r*l+o*u,e[3]=i*l+a*u,e},l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+o*s,e[1]=i*c+a*s,e[2]=r*-s+o*c,e[3]=i*-s+a*c,e},l.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],c=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*c,e[3]=a*c,e},l.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},l.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},"undefined"!=typeof e&&(e.mat2=l);var u={};u.create=function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},u.clone=function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},u.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=n*o-r*i;return c?(c=1/c,e[0]=o*c,e[1]=-r*c,e[2]=-i*c,e[3]=n*c,e[4]=(i*s-o*a)*c,e[5]=(r*a-n*s)*c,e):null},u.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},u.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1],h=n[2],d=n[3],p=n[4],f=n[5];return e[0]=r*l+o*u,e[1]=i*l+a*u,e[2]=r*h+o*d,e[3]=i*h+a*d,e[4]=r*p+o*f+s,e[5]=i*p+a*f+c,e},u.mul=u.multiply,u.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*l,e[1]=i*u+a*l,e[2]=r*-l+o*u,e[3]=i*-l+a*u,e[4]=s,e[5]=c,e},u.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r*l,e[1]=i*l,e[2]=o*u,e[3]=a*u,e[4]=s,e[5]=c,e},u.translate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*l+o*u+s,e[5]=i*l+a*u+c,e},u.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},u.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},"undefined"!=typeof e&&(e.mat2d=u);var h={};h.create=function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},h.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},h.clone=function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},h.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},h.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},h.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},h.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],h=u*a-s*l,d=-u*o+s*c,p=l*o-a*c,f=n*h+r*d+i*p;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*l)*f,e[2]=(s*r-i*a)*f,e[3]=d*f,e[4]=(u*n-i*c)*f,e[5]=(-s*n+i*o)*f,e[6]=p*f,e[7]=(-l*n+r*c)*f,e[8]=(a*n-r*o)*f,e):null},h.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8];return e[0]=a*u-s*l,e[1]=i*l-r*u,e[2]=r*s-i*a,e[3]=s*c-o*u,e[4]=n*u-i*c,e[5]=i*o-n*s,e[6]=o*l-a*c,e[7]=r*c-n*l,e[8]=n*a-r*o,e},h.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*(l*o-a*c)+n*(-l*i+a*s)+r*(c*i-o*s)},h.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=n[0],p=n[1],f=n[2],m=n[3],v=n[4],g=n[5],A=n[6],y=n[7],E=n[8];return e[0]=d*r+p*a+f*l,e[1]=d*i+p*s+f*u,e[2]=d*o+p*c+f*h,e[3]=m*r+v*a+g*l,e[4]=m*i+v*s+g*u,e[5]=m*o+v*c+g*h,e[6]=A*r+y*a+E*l,e[7]=A*i+y*s+E*u,e[8]=A*o+y*c+E*h,e},h.mul=h.multiply,h.translate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=c,e[6]=d*r+p*a+l,e[7]=d*i+p*s+u,e[8]=d*o+p*c+h,e},h.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=Math.sin(n),p=Math.cos(n);return e[0]=p*r+d*a,e[1]=p*i+d*s,e[2]=p*o+d*c,e[3]=p*a-d*r,e[4]=p*s-d*i,e[5]=p*c-d*o,e[6]=l,e[7]=u,e[8]=h,e},h.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},h.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},h.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,c=i+i,l=n*a,u=r*a,h=r*s,d=i*a,p=i*s,f=i*c,m=o*a,v=o*s,g=o*c;return e[0]=1-h-f,e[3]=u-g,e[6]=d+v,e[1]=u+g,e[4]=1-l-f,e[7]=p-m,e[2]=d-v,e[5]=p+m,e[8]=1-l-h,e},h.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],v=t[14],g=t[15],A=n*s-r*a,y=n*c-i*a,E=n*l-o*a,w=r*c-i*s,b=r*l-o*s,x=i*l-o*c,C=u*m-h*f,M=u*v-d*f,T=u*g-p*f,S=h*v-d*m,R=h*g-p*m,I=d*g-p*v,P=A*I-y*R+E*S+w*T-b*M+x*C;return P?(P=1/P,e[0]=(s*I-c*R+l*S)*P,e[1]=(c*T-a*I-l*M)*P,e[2]=(a*R-s*T+l*C)*P,e[3]=(i*R-r*I-o*S)*P,e[4]=(n*I-i*T+o*M)*P,e[5]=(r*T-n*R-o*C)*P,e[6]=(m*x-v*b+g*w)*P,e[7]=(v*E-f*x-g*y)*P,e[8]=(f*b-m*E+g*A)*P,e):null},h.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},h.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},"undefined"!=typeof e&&(e.mat3=h);var d={};d.create=function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},d.clone=function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},d.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},d.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},d.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},d.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],v=t[14],g=t[15],A=n*s-r*a,y=n*c-i*a,E=n*l-o*a,w=r*c-i*s,b=r*l-o*s,x=i*l-o*c,C=u*m-h*f,M=u*v-d*f,T=u*g-p*f,S=h*v-d*m,R=h*g-p*m,I=d*g-p*v,P=A*I-y*R+E*S+w*T-b*M+x*C;return P?(P=1/P,e[0]=(s*I-c*R+l*S)*P,e[1]=(i*R-r*I-o*S)*P,e[2]=(m*x-v*b+g*w)*P,e[3]=(d*b-h*x-p*w)*P,e[4]=(c*T-a*I-l*M)*P,e[5]=(n*I-i*T+o*M)*P,e[6]=(v*E-f*x-g*y)*P,e[7]=(u*x-d*E+p*y)*P,e[8]=(a*R-s*T+l*C)*P,e[9]=(r*T-n*R-o*C)*P,e[10]=(f*b-m*E+g*A)*P,e[11]=(h*E-u*b-p*A)*P,e[12]=(s*M-a*S-c*C)*P,e[13]=(n*S-r*M+i*C)*P,e[14]=(m*y-f*w-v*A)*P,e[15]=(u*w-h*y+d*A)*P,e):null},d.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],v=t[14],g=t[15];return e[0]=s*(d*g-p*v)-h*(c*g-l*v)+m*(c*p-l*d),e[1]=-(r*(d*g-p*v)-h*(i*g-o*v)+m*(i*p-o*d)),e[2]=r*(c*g-l*v)-s*(i*g-o*v)+m*(i*l-o*c),e[3]=-(r*(c*p-l*d)-s*(i*p-o*d)+h*(i*l-o*c)),e[4]=-(a*(d*g-p*v)-u*(c*g-l*v)+f*(c*p-l*d)),e[5]=n*(d*g-p*v)-u*(i*g-o*v)+f*(i*p-o*d),e[6]=-(n*(c*g-l*v)-a*(i*g-o*v)+f*(i*l-o*c)),e[7]=n*(c*p-l*d)-a*(i*p-o*d)+u*(i*l-o*c),e[8]=a*(h*g-p*m)-u*(s*g-l*m)+f*(s*p-l*h),e[9]=-(n*(h*g-p*m)-u*(r*g-o*m)+f*(r*p-o*h)),e[10]=n*(s*g-l*m)-a*(r*g-o*m)+f*(r*l-o*s),e[11]=-(n*(s*p-l*h)-a*(r*p-o*h)+u*(r*l-o*s)),e[12]=-(a*(h*v-d*m)-u*(s*v-c*m)+f*(s*d-c*h)),e[13]=n*(h*v-d*m)-u*(r*v-i*m)+f*(r*d-i*h),e[14]=-(n*(s*v-c*m)-a*(r*v-i*m)+f*(r*c-i*s)),e[15]=n*(s*d-c*h)-a*(r*d-i*h)+u*(r*c-i*s),e},d.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],v=e[15],g=t*a-n*o,A=t*s-r*o,y=t*c-i*o,E=n*s-r*a,w=n*c-i*a,b=r*c-i*s,x=l*f-u*p,C=l*m-h*p,M=l*v-d*p,T=u*m-h*f,S=u*v-d*f,R=h*v-d*m;return g*R-A*S+y*T+E*M-w*C+b*x},d.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],v=t[13],g=t[14],A=t[15],y=n[0],E=n[1],w=n[2],b=n[3];return e[0]=y*r+E*s+w*h+b*m,e[1]=y*i+E*c+w*d+b*v,e[2]=y*o+E*l+w*p+b*g,e[3]=y*a+E*u+w*f+b*A,y=n[4],E=n[5],w=n[6],b=n[7],e[4]=y*r+E*s+w*h+b*m,e[5]=y*i+E*c+w*d+b*v,e[6]=y*o+E*l+w*p+b*g,e[7]=y*a+E*u+w*f+b*A,y=n[8],E=n[9],w=n[10],b=n[11],e[8]=y*r+E*s+w*h+b*m,e[9]=y*i+E*c+w*d+b*v,e[10]=y*o+E*l+w*p+b*g,e[11]=y*a+E*u+w*f+b*A,y=n[12],E=n[13],w=n[14],b=n[15],e[12]=y*r+E*s+w*h+b*m,e[13]=y*i+E*c+w*d+b*v,e[14]=y*o+E*l+w*p+b*g,e[15]=y*a+E*u+w*f+b*A,e},d.mul=d.multiply,d.translate=function(e,t,n){var r,i,o,a,s,c,l,u,h,d,p,f,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*v+h*g+t[12],e[13]=i*m+c*v+d*g+t[13],e[14]=o*m+l*v+p*g+t[14],e[15]=a*m+u*v+f*g+t[15]),e},d.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},d.rotate=function(e,n,r,i){var o,a,s,c,l,u,h,d,p,f,m,v,g,A,y,E,w,b,x,C,M,T,S,R,I=i[0],P=i[1],D=i[2],B=Math.sqrt(I*I+P*P+D*D);return Math.abs(B)<t?null:(B=1/B,I*=B,P*=B,D*=B,o=Math.sin(r),a=Math.cos(r),s=1-a,c=n[0],l=n[1],u=n[2],h=n[3],d=n[4],p=n[5],f=n[6],m=n[7],v=n[8],g=n[9],A=n[10],y=n[11],E=I*I*s+a,w=P*I*s+D*o,b=D*I*s-P*o,x=I*P*s-D*o,C=P*P*s+a,M=D*P*s+I*o,T=I*D*s+P*o,S=P*D*s-I*o,R=D*D*s+a,e[0]=c*E+d*w+v*b,e[1]=l*E+p*w+g*b,e[2]=u*E+f*w+A*b,e[3]=h*E+m*w+y*b,e[4]=c*x+d*C+v*M,e[5]=l*x+p*C+g*M,e[6]=u*x+f*C+A*M,e[7]=h*x+m*C+y*M,e[8]=c*T+d*S+v*R,e[9]=l*T+p*S+g*R,e[10]=u*T+f*S+A*R,e[11]=h*T+m*S+y*R,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},d.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=c*i+d*r,e[8]=l*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-c*r,e},d.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],c=t[3],l=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=c*i-d*r,e[8]=o*r+l*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=c*r+d*i,e},d.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],c=t[3],l=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=c*i+d*r,e[4]=l*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-c*r,e},d.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,c=i+i,l=o+o,u=r*s,h=r*c,d=r*l,p=i*c,f=i*l,m=o*l,v=a*s,g=a*c,A=a*l;return e[0]=1-(p+m),e[1]=h+A,e[2]=d-g,e[3]=0,e[4]=h-A,e[5]=1-(u+m),e[6]=f+v,e[7]=0,e[8]=d+g,e[9]=f-v,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},d.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,c=i+i,l=n*a,u=r*a,h=r*s,d=i*a,p=i*s,f=i*c,m=o*a,v=o*s,g=o*c;return e[0]=1-h-f,e[1]=u+g,e[2]=d-v,e[3]=0,e[4]=u-g,e[5]=1-l-f,e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},d.frustum=function(e,t,n,r,i,o,a){var s=1/(n-t),c=1/(i-r),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e},d.perspective=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},d.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),c=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(a+o)*l,e[15]=1,e},d.lookAt=function(e,n,r,i){var o,a,s,c,l,u,h,p,f,m,v=n[0],g=n[1],A=n[2],y=i[0],E=i[1],w=i[2],b=r[0],x=r[1],C=r[2];return Math.abs(v-b)<t&&Math.abs(g-x)<t&&Math.abs(A-C)<t?d.identity(e):(h=v-b,p=g-x,f=A-C,m=1/Math.sqrt(h*h+p*p+f*f),h*=m,p*=m,f*=m,o=E*f-w*p,a=w*h-y*f,s=y*p-E*h,m=Math.sqrt(o*o+a*a+s*s),m?(m=1/m,o*=m,a*=m,s*=m):(o=0,a=0,s=0),c=p*s-f*a,l=f*o-h*s,u=h*a-p*o,m=Math.sqrt(c*c+l*l+u*u),m?(m=1/m,c*=m,l*=m,u*=m):(c=0,l=0,u=0),e[0]=o,e[1]=c,e[2]=h,e[3]=0,e[4]=a,e[5]=l,e[6]=p,e[7]=0,e[8]=s,e[9]=u,e[10]=f,e[11]=0,e[12]=-(o*v+a*g+s*A),e[13]=-(c*v+l*g+u*A),e[14]=-(h*v+p*g+f*A),e[15]=1,e)},d.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},d.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},"undefined"!=typeof e&&(e.mat4=d);var p={};p.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.rotationTo=function(){var e=s.create(),t=s.fromValues(1,0,0),n=s.fromValues(0,1,0);return function(r,i,o){var a=s.dot(i,o);return a<-.999999?(s.cross(e,t,i),s.length(e)<1e-6&&s.cross(e,n,i),s.normalize(e,e),p.setAxisAngle(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(s.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,p.normalize(r,r))}}(),p.setAxes=function(){var e=h.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],
e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],p.normalize(t,p.fromMat3(t,e))}}(),p.clone=c.clone,p.fromValues=c.fromValues,p.copy=c.copy,p.set=c.set,p.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},p.add=c.add,p.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+a*s+i*l-o*c,e[1]=i*u+a*c+o*s-r*l,e[2]=o*u+a*l+r*c-i*s,e[3]=a*u-r*s-i*c-o*l,e},p.mul=p.multiply,p.scale=c.scale,p.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*s,e[1]=i*c+o*s,e[2]=o*c-i*s,e[3]=a*c-r*s,e},p.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c-o*s,e[1]=i*c+a*s,e[2]=o*c+r*s,e[3]=a*c-i*s,e},p.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*s,e[1]=i*c-r*s,e[2]=o*c+a*s,e[3]=a*c-o*s,e},p.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},p.dot=c.dot,p.lerp=c.lerp,p.slerp=function(e,t,n,r){var i,o,a,s,c,l=t[0],u=t[1],h=t[2],d=t[3],p=n[0],f=n[1],m=n[2],v=n[3];return o=l*p+u*f+h*m+d*v,o<0&&(o=-o,p=-p,f=-f,m=-m,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,c=Math.sin(r*i)/a):(s=1-r,c=r),e[0]=s*l+c*p,e[1]=s*u+c*f,e[2]=s*h+c*m,e[3]=s*d+c*v,e},p.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},p.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},p.length=c.length,p.len=p.length,p.squaredLength=c.squaredLength,p.sqrLen=p.squaredLength,p.normalize=c.normalize,p.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[7]-t[5])*n,e[1]=(t[2]-t[6])*n,e[2]=(t[3]-t[1])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e},p.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.quat=p)}(t.exports)}(this)},{}],24:[function(e,t,n){(function(){var e=this,r=e._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,c=o.push,l=o.slice,u=o.concat,h=a.toString,d=a.hasOwnProperty,p=o.forEach,f=o.map,m=o.reduce,v=o.reduceRight,g=o.filter,A=o.every,y=o.some,E=o.indexOf,w=o.lastIndexOf,b=Array.isArray,x=Object.keys,C=s.bind,M=function(e){return e instanceof M?e:this instanceof M?void(this._wrapped=e):new M(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=M),n._=M):e._=M,M.VERSION="1.4.4";var T=M.each=M.forEach=function(e,t,n){if(null!=e)if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e)===i)return}else for(var a in e)if(M.has(e,a)&&t.call(n,e[a],a,e)===i)return};M.map=M.collect=function(e,t,n){var r=[];return null==e?r:f&&e.map===f?e.map(t,n):(T(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var S="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return r&&(t=M.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(S);return n},M.reduceRight=M.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),v&&e.reduceRight===v)return r&&(t=M.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=M.keys(e);o=a.length}if(T(e,function(s,c,l){c=a?a[--o]:--o,i?n=t.call(r,n,e[c],c,l):(n=e[c],i=!0)}),!i)throw new TypeError(S);return n},M.find=M.detect=function(e,t,n){var r;return R(e,function(e,i,o){if(t.call(n,e,i,o))return r=e,!0}),r},M.filter=M.select=function(e,t,n){var r=[];return null==e?r:g&&e.filter===g?e.filter(t,n):(T(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},M.reject=function(e,t,n){return M.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},M.every=M.all=function(e,t,n){t||(t=M.identity);var r=!0;return null==e?r:A&&e.every===A?e.every(t,n):(T(e,function(e,o,a){if(!(r=r&&t.call(n,e,o,a)))return i}),!!r)};var R=M.some=M.any=function(e,t,n){t||(t=M.identity);var r=!1;return null==e?r:y&&e.some===y?e.some(t,n):(T(e,function(e,o,a){if(r||(r=t.call(n,e,o,a)))return i}),!!r)};M.contains=M.include=function(e,t){return null!=e&&(E&&e.indexOf===E?e.indexOf(t)!=-1:R(e,function(e){return e===t}))},M.invoke=function(e,t){var n=l.call(arguments,2),r=M.isFunction(t);return M.map(e,function(e){return(r?t:e[t]).apply(e,n)})},M.pluck=function(e,t){return M.map(e,function(e){return e[t]})},M.where=function(e,t,n){return M.isEmpty(t)?n?null:[]:M[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},M.findWhere=function(e,t){return M.where(e,t,!0)},M.max=function(e,t,n){if(!t&&M.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&M.isEmpty(e))return-(1/0);var r={computed:-(1/0),value:-(1/0)};return T(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>=r.computed&&(r={value:e,computed:a})}),r.value},M.min=function(e,t,n){if(!t&&M.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&M.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},M.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=M.random(n++),r[n-1]=r[t],r[t]=e}),r};var I=function(e){return M.isFunction(e)?e:function(t){return t[e]}};M.sortBy=function(e,t,n){var r=I(t);return M.pluck(M.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var P=function(e,t,n,r){var i={},o=I(t||M.identity);return T(e,function(t,a){var s=o.call(n,t,a,e);r(i,s,t)}),i};M.groupBy=function(e,t,n){return P(e,t,n,function(e,t,n){(M.has(e,t)?e[t]:e[t]=[]).push(n)})},M.countBy=function(e,t,n){return P(e,t,n,function(e,t){M.has(e,t)||(e[t]=0),e[t]++})},M.sortedIndex=function(e,t,n,r){n=null==n?M.identity:I(n);for(var i=n.call(r,t),o=0,a=e.length;o<a;){var s=o+a>>>1;n.call(r,e[s])<i?o=s+1:a=s}return o},M.toArray=function(e){return e?M.isArray(e)?l.call(e):e.length===+e.length?M.map(e,M.identity):M.values(e):[]},M.size=function(e){return null==e?0:e.length===+e.length?e.length:M.keys(e).length},M.first=M.head=M.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:l.call(e,0,t)},M.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},M.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},M.rest=M.tail=M.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},M.compact=function(e){return M.filter(e,M.identity)};var D=function(e,t,n){return T(e,function(e){M.isArray(e)?t?c.apply(n,e):D(e,t,n):n.push(e)}),n};M.flatten=function(e,t){return D(e,t,[])},M.without=function(e){return M.difference(e,l.call(arguments,1))},M.uniq=M.unique=function(e,t,n,r){M.isFunction(t)&&(r=n,n=t,t=!1);var i=n?M.map(e,n,r):e,o=[],a=[];return T(i,function(n,r){(t?r&&a[a.length-1]===n:M.contains(a,n))||(a.push(n),o.push(e[r]))}),o},M.union=function(){return M.uniq(u.apply(o,arguments))},M.intersection=function(e){var t=l.call(arguments,1);return M.filter(M.uniq(e),function(e){return M.every(t,function(t){return M.indexOf(t,e)>=0})})},M.difference=function(e){var t=u.apply(o,l.call(arguments,1));return M.filter(e,function(e){return!M.contains(t,e)})},M.zip=function(){for(var e=l.call(arguments),t=M.max(M.pluck(e,"length")),n=new Array(t),r=0;r<t;r++)n[r]=M.pluck(e,""+r);return n},M.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},M.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=M.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(E&&e.indexOf===E)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},M.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},M.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);i<r;)o[i++]=e,e+=n;return o},M.bind=function(e,t){if(e.bind===C&&C)return C.apply(e,l.call(arguments,1));var n=l.call(arguments,2);return function(){return e.apply(t,n.concat(l.call(arguments)))}},M.partial=function(e){var t=l.call(arguments,1);return function(){return e.apply(this,t.concat(l.call(arguments)))}},M.bindAll=function(e){var t=l.call(arguments,1);return 0===t.length&&(t=M.functions(e)),T(t,function(t){e[t]=M.bind(e[t],e)}),e},M.memoize=function(e,t){var n={};return t||(t=M.identity),function(){var r=t.apply(this,arguments);return M.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},M.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},M.defer=function(e){return M.delay.apply(M,[e,1].concat(l.call(arguments,1)))},M.throttle=function(e,t){var n,r,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(n,r)};return function(){var c=new Date,l=t-(c-a);return n=this,r=arguments,l<=0?(clearTimeout(i),i=null,a=c,o=e.apply(n,r)):i||(i=setTimeout(s,l)),o}},M.debounce=function(e,t,n){var r,i;return function(){var o=this,a=arguments,s=function(){r=null,n||(i=e.apply(o,a))},c=n&&!r;return clearTimeout(r),r=setTimeout(s,t),c&&(i=e.apply(o,a)),i}},M.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},M.wrap=function(e,t){return function(){var n=[e];return c.apply(n,arguments),t.apply(this,n)}},M.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},M.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},M.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)M.has(e,n)&&(t[t.length]=n);return t},M.values=function(e){var t=[];for(var n in e)M.has(e,n)&&t.push(e[n]);return t},M.pairs=function(e){var t=[];for(var n in e)M.has(e,n)&&t.push([n,e[n]]);return t},M.invert=function(e){var t={};for(var n in e)M.has(e,n)&&(t[e[n]]=n);return t},M.functions=M.methods=function(e){var t=[];for(var n in e)M.isFunction(e[n])&&t.push(n);return t.sort()},M.extend=function(e){return T(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},M.pick=function(e){var t={},n=u.apply(o,l.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},M.omit=function(e){var t={},n=u.apply(o,l.call(arguments,1));for(var r in e)M.contains(n,r)||(t[r]=e[r]);return t},M.defaults=function(e){return T(l.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},M.clone=function(e){return M.isObject(e)?M.isArray(e)?e.slice():M.extend({},e):e},M.tap=function(e,t){return t(e),e};var B=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof M&&(e=e._wrapped),t instanceof M&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var a=0,s=!0;if("[object Array]"==i){if(a=e.length,s=a==t.length)for(;a--&&(s=B(e[a],t[a],n,r)););}else{var c=e.constructor,l=t.constructor;if(c!==l&&!(M.isFunction(c)&&c instanceof c&&M.isFunction(l)&&l instanceof l))return!1;for(var u in e)if(M.has(e,u)&&(a++,!(s=M.has(t,u)&&B(e[u],t[u],n,r))))break;if(s){for(u in t)if(M.has(t,u)&&!a--)break;s=!a}}return n.pop(),r.pop(),s};M.isEqual=function(e,t){return B(e,t,[],[])},M.isEmpty=function(e){if(null==e)return!0;if(M.isArray(e)||M.isString(e))return 0===e.length;for(var t in e)if(M.has(e,t))return!1;return!0},M.isElement=function(e){return!(!e||1!==e.nodeType)},M.isArray=b||function(e){return"[object Array]"==h.call(e)},M.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){M["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),M.isArguments(arguments)||(M.isArguments=function(e){return!(!e||!M.has(e,"callee"))}),"function"!=typeof/./&&(M.isFunction=function(e){return"function"==typeof e}),M.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},M.isNaN=function(e){return M.isNumber(e)&&e!=+e},M.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==h.call(e)},M.isNull=function(e){return null===e},M.isUndefined=function(e){return void 0===e},M.has=function(e,t){return d.call(e,t)},M.noConflict=function(){return e._=r,this},M.identity=function(e){return e},M.times=function(e,t,n){for(var r=Array(e),i=0;i<e;i++)r[i]=t.call(n,i);return r},M.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=M.invert(H.escape);var k={escape:new RegExp("["+M.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(H.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(e){M[e]=function(t){return null==t?"":(""+t).replace(k[e],function(t){return H[e][t]})}}),M.result=function(e,t){if(null==e)return null;var n=e[t];return M.isFunction(n)?n.call(e):n},M.mixin=function(e){T(M.functions(e),function(t){var n=M[t]=e[t];M.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j.call(this,n.apply(M,e))}})};var F=0;M.uniqueId=function(e){var t=++F+"";return e?e+t:t},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(e,t,n){var r;n=M.defaults({},n,M.templateSettings);var i=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(z,function(e){return"\\"+Q[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return r(t,M);var c=function(e){return r.call(this,e,M)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},M.chain=function(e){return M(e).chain()};var j=function(e){return this._chain?M(e).chain():e};M.mixin(M),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];M.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=o[e];M.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),M.extend(M.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(e,t,n){"undefined"!=typeof window&&"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}),Leap=e("../lib/index")},{"../lib/index":11}]},{},[25]),function(){var e,t,n,r,i,o,a,s,c,l,u,h,d,p;p=null,s=function(e,t){var n,r,i,o,a,s,c;return p.scene=new THREE.Scene,p.renderer=s=new THREE.WebGLRenderer({alpha:!0}),c=window.innerWidth,o=window.innerHeight,s.setClearColor(0,0),s.setSize(c,o),s.domElement.className="leap-boneHand",e.appendChild(s.domElement),r=new THREE.DirectionalLight(16777215,1),r.position.set(0,.5,1),p.scene.add(r),r=new THREE.DirectionalLight(16777215,1),r.position.set(.5,-.5,-1),p.scene.add(r),r=new THREE.DirectionalLight(16777215,.5),r.position.set(-.5,0,-.2),p.scene.add(r),a=1,i=1e4,t&&(a*=t,i*=t),p.camera=n=new THREE.PerspectiveCamera(45,c/o,a,i),n.position.fromArray([0,300,500]),n.lookAt(new THREE.Vector3(0,160,0)),p.scene.add(n),window.addEventListener("resize",function(){return c=window.innerWidth,o=window.innerHeight,n.aspect=c/o,n.updateProjectionMatrix(),s.setSize(c,o),s.render(p.scene,n)},!1),p.render||(p.render=function(e){return s.render(p.scene,p.camera)}),p.render()},n=null,c=null,r=null,a=null,u=null,o=null,l=null,h=null,t=null,e=function(){function e(){var e,n,i,s,d,f,m,v,g;for(h=isNaN(p.opacity)?new THREE.MeshPhongMaterial:new THREE.MeshPhongMaterial({transparent:!0,opacity:p.opacity}),o=40*a,l=40*u,this.fingerMeshes=[],i=f=0;f<5;i=++f){for(n=[],e=0===i?3:4,s=m=0;0<=e?m<e:m>e;s=0<=e?++m:--m)d=new THREE.Mesh(new THREE.SphereGeometry(l,32,32),h.clone()),d.material.color.copy(c),p.scene.add(d),n.push(d),d=new THREE.Mesh(new THREE.CylinderGeometry(o,o,40,32),h.clone()),d.material.color.copy(r),p.scene.add(d),n.push(d);d=new THREE.Mesh(new THREE.SphereGeometry(l,32,32),h.clone()),d.material.color.copy(c),p.scene.add(d),n.push(d),this.fingerMeshes.push(n)}if(p.arm){for(this.armMesh=new THREE.Object3D,this.armBones=[],this.armSpheres=[],i=v=0;v<=3;i=++v)this.armBones.push(new THREE.Mesh(new THREE.CylinderGeometry(o,o,i<2?1e3:100,32),h.clone())),this.armBones[i].material.color.copy(r),i>1&&this.armBones[i].quaternion.multiply(t),this.armMesh.add(this.armBones[i]);for(this.armSpheres=[],i=g=0;g<=3;i=++g)this.armSpheres.push(new THREE.Mesh(new THREE.SphereGeometry(l,32,32),h.clone())),this.armSpheres[i].material.color.copy(c),this.armMesh.add(this.armSpheres[i]);p.scene.add(this.armMesh)}}return e.unusedHandMeshes=[],e.get=function(){var t;return 0===e.unusedHandMeshes.length&&(t=e.create()),t=e.unusedHandMeshes.pop(),t.show(),t},e.prototype.replace=function(){return this.hide(),e.unusedHandMeshes.push(this)},e.create=function(){var t;return t=new e,t.setVisibility(!1),e.unusedHandMeshes.push(t),t},e.prototype.scaleTo=function(e){var t,n,r,i,o,a,s,c,l,u,h,d,f;for(r=e.middleFinger.proximal.length/this.fingerMeshes[2][1].geometry.parameters.height,l=d=0;d<5;l=++d)for(a=e.fingers[l],u=0;;){if(u===this.fingerMeshes[l].length-1){h=this.fingerMeshes[l][u],h.scale.set(r,r,r);break}i=a.bones[3-u/2],h=this.fingerMeshes[l][u],h.scale.set(r,r,r),u++,h=this.fingerMeshes[l][u],s=i.length/h.geometry.parameters.height,h.scale.set(r,s,r),u++}if(p.arm){for(t=e.arm.length/(this.armBones[0].geometry.parameters.height+this.armBones[0].geometry.parameters.radiusTop),n=e.arm.width/(this.armBones[2].geometry.parameters.height+this.armBones[2].geometry.parameters.radiusTop),l=f=0;f<=3;l=++f)this.armBones[l].scale.set(r,l<2?t:n,r),this.armSpheres[l].scale.set(r,r,r);o=e.arm.width/2*.85,c=e.arm.length/2,this.armBones[0].position.setX(o),this.armBones[1].position.setX(-o),this.armBones[2].position.setY(c),this.armBones[3].position.setY(-c),this.armSpheres[0].position.set(-o,c,0),this.armSpheres[1].position.set(o,c,0),this.armSpheres[2].position.set(o,-c,0),this.armSpheres[3].position.set(-o,-c,0)}return this},e.prototype.formTo=function(e){var t,r,i,o,a,s;for(i=s=0;s<5;i=++s)for(r=e.fingers[i],o=0;;){if(o===this.fingerMeshes[i].length-1){a=this.fingerMeshes[i][o],a.position.fromArray(t.prevJoint);break}t=r.bones[3-o/2],a=this.fingerMeshes[i][o],a.position.fromArray(t.nextJoint),++o,a=this.fingerMeshes[i][o],a.position.fromArray(t.center()),a.setRotationFromMatrix((new THREE.Matrix4).fromArray(t.matrix())),a.quaternion.multiply(n),++o}return this.armMesh&&(this.armMesh.position.fromArray(e.arm.center()),this.armMesh.setRotationFromMatrix((new THREE.Matrix4).fromArray(e.arm.matrix())),this.armMesh.quaternion.multiply(n)),this},e.prototype.setVisibility=function(e){var t,n,r,i,o;for(t=r=0;r<5;t=++r)for(n=0;;)if(this.fingerMeshes[t][n].visible=e,++n,n===this.fingerMeshes[t].length)break;if(p.arm){for(o=[],t=i=0;i<=3;t=++i)this.armBones[t].visible=e,o.push(this.armSpheres[t].visible=e);return o}},e.prototype.show=function(){return this.setVisibility(!0)},e.prototype.hide=function(){return this.setVisibility(!1)},e}(),d=function(t){var n;if(p.scene)return n=t.data("handMesh"),n||(n=e.get().scaleTo(t),t.data("handMesh",n)),n.formTo(t)},i=function(e){var t;return t=e.data("handMesh"),t&&t.replace(),t=e.data("handMesh",null)},Leap.plugin("boneHand",function(f){var m;return null==f&&(f={}),p=f,p.boneScale&&(a=p.boneScale),p.jointScale&&(u=p.jointScale),p.boneColor&&(r=p.boneColor),p.jointColor&&(c=p.jointColor),p.HandMesh=e,n=(new THREE.Quaternion).setFromEuler(new THREE.Euler(Math.PI/2,0,0)),c=(new THREE.Color).setHex(6138368),r=(new THREE.Color).setHex(16777215),a=1/6,u=.2,o=null,l=null,h=null,t=(new THREE.Quaternion).setFromEuler(new THREE.Euler(0,0,Math.PI/2)),this.use("handEntry"),this.use("handHold"),void 0===p.scene&&(console.assert(p.targetEl),this.plugins.transform&&this.plugins.transform.getScale()&&(m=this.plugins.transform.scale.x),s(p.targetEl,m),this.plugins.transform&&this.plugins.transform.vr&&p.camera.position.set(0,0,0)),p.scene&&(e.create(),e.create(),0===Leap.version.major&&Leap.version.minor<7&&Leap.version.dot<4&&console.warn("BoneHand default scene render requires LeapJS > 0.6.3. You're running have "+Leap.version.full),this.on("frameEnd",function(e){return p.render(e)})),this.on("handLost",i),{hand:d}})}.call(this),function(){var e;if(e=function(){var e;return e=[],0===Leap.version.major&&Leap.version.minor<5&&console.warn("The hand entry plugin requires LeapJS 0.5.0 or newer."),this.on("deviceStopped",function(){for(var t=0,n=e.length;t<n;t++)id=e[t],e.splice(t,1),this.emit("handLost",this.lastConnectionFrame.hand(id)),t--,n--}),{frame:function(t){var n,r,i,o,a;r=t.hands.map(function(e){return e.id});for(var s=0,c=e.length;s<c;s++)n=e[s],r.indexOf(n)==-1&&(e.splice(s,1),this.emit("handLost",this.frame(1).hand(n)),s--,c--);for(a=[],i=0,o=r.length;i<o;i++)n=r[i],e.indexOf(n)===-1?(e.push(n),a.push(this.emit("handFound",t.hand(n)))):a.push(void 0);return a}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handEntry",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handEntry=e}}.call(this),function(){var e;if(e=function(){var e,t;return t={},e=function(e,n,r){var i,o,a,s;if(t[a=e+this.id]||(t[a]=[]),i=t[e+this.id],void 0!==r)return i[n]=r;if("[object String]"==={}.toString.call(n))return i[n];s=[];for(o in n)r=n[o],void 0===r?s.push(delete i[o]):s.push(i[o]=r);return s},{hand:{data:function(t,n){return e.call(this,"h",t,n)},hold:function(e){return e?this.data({holding:e}):this.hold(this.hovering())},holding:function(){return this.data("holding")},release:function(){var e;return e=this.data("holding"),this.data({holding:void 0}),e},hoverFn:function(e){return this.data({getHover:e})},hovering:function(){var e;if(e=this.data("getHover"))return this._hovering||(this._hovering=e.call(this))}},pointable:{data:function(t,n){return e.call(this,"p",t,n)}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handHold",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handHold=e}}.call(this),function(e,t){"use strict";function n(e){this.options=e||(e={}),this.loading=!1,this.timeBetweenLoops=e.timeBetweenLoops||50,this.packingStructure=["id","timestamp",{hands:[["id","type","direction","palmNormal","palmPosition","palmVelocity","stabilizedPalmPosition","pinchStrength","grabStrength","confidence","armBasis","armWidth","elbow","wrist"]]},{pointables:[["id","direction","handId","length","stabilizedTipPosition","tipPosition","tipVelocity","tool","carpPosition","mcpPosition","pipPosition","dipPosition","btipPosition","bases","type"]]},{interactionBox:["center","size"]}],this.setFrames(e.frames||[])}var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,n,i,o,a,s,c,l="",u=0;for(e=r.compress(e);u<2*e.length;)u%2==0?(t=e.charCodeAt(u/2)>>8,n=255&e.charCodeAt(u/2),i=u/2+1<e.length?e.charCodeAt(u/2+1)>>8:NaN):(t=255&e.charCodeAt((u-1)/2),(u+1)/2<e.length?(n=e.charCodeAt((u+1)/2)>>8,i=255&e.charCodeAt((u+1)/2)):n=i=NaN),u+=3,o=t>>2,a=(3&t)<<4|n>>4,s=(15&n)<<2|i>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),l=l+r._keyStr.charAt(o)+r._keyStr.charAt(a)+r._keyStr.charAt(s)+r._keyStr.charAt(c);return l},decompressFromBase64:function(e){if(null==e)return"";var t,n,i,o,a,s,c,l,u="",h=0,d=0,p=r._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)a=r._keyStr.indexOf(e.charAt(d++)),s=r._keyStr.indexOf(e.charAt(d++)),c=r._keyStr.indexOf(e.charAt(d++)),l=r._keyStr.indexOf(e.charAt(d++)),n=a<<2|s>>4,i=(15&s)<<4|c>>2,o=(3&c)<<6|l,h%2==0?(t=n<<8,64!=c&&(u+=p(t|i)),64!=l&&(t=o<<8)):(u+=p(t|n),64!=c&&(t=i<<8),64!=l&&(u+=p(t|o))),h+=3;return r.decompress(u)},compressToUTF16:function(e){if(null==e)return"";var t,n,i,o="",a=0,s=r._f;for(e=r.compress(e),t=0;t<e.length;t++)switch(n=e.charCodeAt(t),a++){case 0:o+=s((n>>1)+32),i=(1&n)<<14;break;case 1:o+=s(i+(n>>2)+32),i=(3&n)<<13;break;case 2:o+=s(i+(n>>3)+32),i=(7&n)<<12;break;case 3:o+=s(i+(n>>4)+32),i=(15&n)<<11;break;case 4:o+=s(i+(n>>5)+32),i=(31&n)<<10;break;case 5:o+=s(i+(n>>6)+32),i=(63&n)<<9;break;case 6:o+=s(i+(n>>7)+32),i=(127&n)<<8;break;case 7:o+=s(i+(n>>8)+32),i=(255&n)<<7;break;case 8:o+=s(i+(n>>9)+32),i=(511&n)<<6;break;case 9:o+=s(i+(n>>10)+32),i=(1023&n)<<5;break;case 10:o+=s(i+(n>>11)+32),i=(2047&n)<<4;break;case 11:o+=s(i+(n>>12)+32),i=(4095&n)<<3;break;case 12:o+=s(i+(n>>13)+32),i=(8191&n)<<2;break;case 13:o+=s(i+(n>>14)+32),i=(16383&n)<<1;break;case 14:o+=s(i+(n>>15)+32,(32767&n)+32),a=0}return o+s(i+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,n,i="",o=0,a=0,s=r._f;a<e.length;){switch(n=e.charCodeAt(a)-32,o++){case 0:t=n<<1;break;case 1:i+=s(t|n>>14),t=(16383&n)<<2;break;case 2:i+=s(t|n>>13),t=(8191&n)<<3;break;case 3:i+=s(t|n>>12),t=(4095&n)<<4;break;case 4:i+=s(t|n>>11),t=(2047&n)<<5;break;case 5:i+=s(t|n>>10),t=(1023&n)<<6;break;case 6:i+=s(t|n>>9),t=(511&n)<<7;break;case 7:i+=s(t|n>>8),t=(255&n)<<8;break;case 8:i+=s(t|n>>7),t=(127&n)<<9;break;case 9:i+=s(t|n>>6),t=(63&n)<<10;break;case 10:i+=s(t|n>>5),t=(31&n)<<11;break;case 11:i+=s(t|n>>4),t=(15&n)<<12;break;case 12:i+=s(t|n>>3),t=(7&n)<<13;break;case 13:i+=s(t|n>>2),t=(3&n)<<14;break;case 14:i+=s(t|n>>1),t=(1&n)<<15;break;case 15:i+=s(t|n),o=0}a++}return r.decompress(i)},compress:function(e){if(null==e)return"";var t,n,i,o={},a={},s="",c="",l="",u=2,h=3,d=2,p="",f=0,m=0,v=r._f;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(o,s)||(o[s]=h++,a[s]=!0),c=l+s,Object.prototype.hasOwnProperty.call(o,c))l=c;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(t=0;t<d;t++)f<<=1,15==m?(m=0,p+=v(f),f=0):m++;for(n=l.charCodeAt(0),t=0;t<8;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1}else{for(n=1,t=0;t<d;t++)f=f<<1|n,15==m?(m=0,p+=v(f),f=0):m++,n=0;for(n=l.charCodeAt(0),t=0;t<16;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1}u--,0==u&&(u=Math.pow(2,d),d++),delete a[l]}else for(n=o[l],t=0;t<d;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1;u--,0==u&&(u=Math.pow(2,d),d++),o[c]=h++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(t=0;t<d;t++)f<<=1,15==m?(m=0,p+=v(f),f=0):m++;for(n=l.charCodeAt(0),t=0;t<8;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1}else{for(n=1,t=0;t<d;t++)f=f<<1|n,15==m?(m=0,p+=v(f),f=0):m++,n=0;for(n=l.charCodeAt(0),t=0;t<16;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1}u--,0==u&&(u=Math.pow(2,d),d++),delete a[l]}else for(n=o[l],t=0;t<d;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1;u--,0==u&&(u=Math.pow(2,d),d++)}for(n=2,t=0;t<d;t++)f=f<<1|1&n,15==m?(m=0,p+=v(f),f=0):m++,n>>=1;for(;;){if(f<<=1,15==m){p+=v(f);break}m++}return p},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,n,i,o,a,s,c,l,u=[],h=4,d=4,p=3,f="",m="",v=r._f,g={string:e,val:e.charCodeAt(0),position:32768,index:1};for(n=0;n<3;n+=1)u[n]=n;for(o=0,s=Math.pow(2,2),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;switch(t=o){case 0:for(o=0,s=Math.pow(2,8),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;l=v(o);break;case 1:for(o=0,s=Math.pow(2,16),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;l=v(o);break;case 2:return""}for(u[3]=l,i=m=l;;){if(g.index>g.string.length)return"";for(o=0,s=Math.pow(2,p),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;switch(l=o){case 0:for(o=0,s=Math.pow(2,8),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;u[d++]=v(o),l=d-1,h--;break;case 1:for(o=0,s=Math.pow(2,16),c=1;c!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(a>0?1:0)*c,c<<=1;u[d++]=v(o),l=d-1,h--;break;case 2:return m}if(0==h&&(h=Math.pow(2,p),p++),u[l])f=u[l];else{if(l!==d)return null;f=i+i.charAt(0)}m+=f,u[d++]=i+f.charAt(0),h--,i=f,0==h&&(h=Math.pow(2,p),p++)}}};"undefined"!=typeof module&&null!=module&&(module.exports=r),function(){if("undefined"==typeof e.performance&&(e.performance={}),!e.performance.now){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}}}(),n.prototype={setFrames:function(e){this.frameData=e,this.frameIndex=0,this.frameCount=e.length,this.leftCropPosition=0,this.rightCropPosition=this.frameCount,this.setMetaData()},addFrame:function(e){this.frameData.push(e)},currentFrame:function(){return this.frameData[this.frameIndex]},nextFrame:function(){var e=this.frameIndex+1;return e%=this.rightCropPosition||1,e<this.leftCropPosition&&(e=this.leftCropPosition),this.frameData[e]},advanceFrame:function(){return this.frameIndex++,this.frameIndex>=this.rightCropPosition&&!this.options.loop?(this.frameIndex--,!1):(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition),!0)},readyPlay:function(){this.frameIndex++,this.frameIndex>=this.rightCropPosition?(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition)):this.frameIndex--},cloneCurrentFrame:function(){return JSON.parse(JSON.stringify(this.currentFrame()))},createLerpFrameData:function(e){for(var t,n,r,i=this.currentFrame(),o=this.nextFrame(),a=["palmPosition","stabilizedPalmPosition","sphereCenter","direction","palmNormal","palmVelocity"],s=["mcpPosition","pipPosition","dipPosition","tipPosition","direction"],c=this.cloneCurrentFrame(),l=c.hands.length,u=c.pointables.length,h=a.length,d=s.length,p=0;p<l;p++){n=c.hands[p];for(var f=0;f<h;f++)t=a[f],i.hands[p][t]&&o.hands[p]&&Leap.vec3.lerp(n[t],i.hands[p][t],o.hands[p][t],e)}for(p=0;p<u;p++)for(r=c.pointables[p],f=0;f<d;f++)t=s[f],i.pointables[p][t]&&o.hands[p]&&Leap.vec3.lerp(r[t],i.pointables[p][t],o.pointables[p][t],0);return c},timeToNextFrame:function(){
var e=(this.nextFrame().timestamp-this.currentFrame().timestamp)/1e3;return e<0&&(e=this.timeBetweenLoops),e},blank:function(){return 0===this.frameData.length},leftCrop:function(){this.leftCropPosition=this.frameIndex},rightCrop:function(){this.rightCropPosition=this.frameIndex},cullFrames:function(e){console.log("cull frames",e),e||(e=1);for(var t=0;t<this.frameData.length;t++)this.frameData.splice(t,e);this.setMetaData()},frameRate:function(){return 0==this.frameData.length?0:this.frameData.length/(this.frameData[this.frameData.length-1].timestamp-this.frameData[0].timestamp)*1e6},croppedFrameData:function(){return this.frameData.slice(this.leftCropPosition,this.rightCropPosition)},setMetaData:function(){var e={formatVersion:2,generatedBy:"LeapJS Playback 0.2.0",frames:this.rightCropPosition-this.leftCropPosition,protocolVersion:this.options.requestProtocolVersion,serviceVersion:this.options.serviceVersion,frameRate:this.frameRate().toPrecision(2),modified:(new Date).toString()};this.metadata||(this.metadata={});for(var t in e)this.metadata[t]=e[t]},packedFrameData:function(){var e,t=this.croppedFrameData(),n=[];n.push(this.packingStructure);for(var r=0,i=t.length;r<i;r++)e=t[r],n.push(this.packArray(this.packingStructure,e));return n},packArray:function(e,t){for(var n,r=[],i=0,o=e.length;i<o;i++)if(n=e[i],"string"==typeof n)r.push(t[n]);else if("[object Array]"==Object.prototype.toString.call(n))for(var a=0,s=t.length;a<s;a++)r.push(this.packArray(n,t[a]));else{for(var c in n)break;r.push(this.packArray(n[c],t[c]))}return r},unPackFrameData:function(e){for(var t,n=e[0],r=[],i=1,o=e.length;i<o;i++)t=e[i],r.push(this.unPackArray(n,t));return r},unPackArray:function(e,t){for(var n,r={},i=0,o=e.length;i<o;i++)if(n=e[i],"string"==typeof n)r[n]=t[i];else{if("[object Array]"==Object.prototype.toString.call(n)){for(var a=[],s=0,c=t.length;s<c;s++)a.push(this.unPackArray(n,t[s]));return a}for(var l in n)break;r[l]=this.unPackArray(n[l],t[i])}return r},toHash:function(){return this.setMetaData(),{metadata:this.metadata,frames:this.packedFrameData()}},"export":function(e){var t=JSON.stringify(this.toHash());return"json"==e?t:r.compressToBase64(t)},save:function(e){var t;t=this.metadata.title?this.metadata.title.replace(/\s/g,""):"leap-playback-recording",this.metadata.frameRate&&(t+="-"+Math.round(this.metadata.frameRate)+"fps"),"json"===e?saveAs(new Blob([this["export"]("json")],{type:"text/JSON;charset=utf-8"}),t+".json"):saveAs(new Blob([this["export"]("lz")],{type:"application/x-gzip;charset=utf-8"}),t+".json.lz")},decompress:function(e){return r.decompressFromBase64(e)},loaded:function(){return!(!this.frameData||!this.frameData.length)},loadFrameData:function(e){var t=new XMLHttpRequest,n=this.url,r=this;t.onreadystatechange=function(){t.readyState===t.DONE&&(200===t.status||0===t.status?t.responseText?r.finishLoad(t.responseText,e):console.error('Leap Playback: "'+n+'" seems to be unreachable or the file is empty.'):console.error("Leap Playback: Couldn't load \""+n+'" ('+t.status+")"))},t.addEventListener("progress",function(e){if(r.options.loadProgress&&e.lengthComputable){var t=e.loaded/e.total;r.options.loadProgress(r,t,e)}}),this.loading=!0,t.open("GET",n,!0),t.send(null)},finishLoad:function(e,t){var n=this.url;"lz"==n.split(".")[n.split(".").length-1]&&(e=this.decompress(e)),e=JSON.parse(e),2==e.metadata.formatVersion&&(e.frames=this.unPackFrameData(e.frames)),this.metadata=e.metadata,console.log("Recording loaded:",this.metadata),this.loading=!1,t&&t.call(this,e.frames)}},function(){function r(e,t){var n=this;t||(t={}),this.options=t,this.recording=t.recording,this.controller=e,this.resetTimers(),this.setupLoops(),this.controller.connection.on("ready",function(){n.setupProtocols()}),this.userHasControl=!1,t.recording&&("[object String]"==Object.prototype.toString.call(t.recording)&&(t.recording={url:t.recording}),this.setRecording(t.recording)),document.addEventListener("DOMContentLoaded",function(e){document.body.addEventListener("keydown",function(e){e.which===n.options.pauseHotkey&&n.toggle()},!1)})}var i='<img class="playback-connect-leap" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHmAPf/AOnxtbS0tc3eVTMzNM3NztvnhtbX1/Hy86ioqezs7Z6entzd3r7UJdHhZcnKzOjo6sXZO319fkJCQurq6xMTFPj65q2treHh4vT42uXl5/Lz9JCQkfP09FxcXebm54yMjsvMzSgoKdfleLGxsUtLTPDx8cHCwlNTVSIiI6CgoYSEhAUFBpmZmtHS1Li5ucHDxNHR0err7HZ2duDrl8XFxvP09vv98/Dx8trb3MjIyN7e3x4eHmZmZj4+PrzTHtDQ0uvs7dra2uzt7ZWVldfY2cPExtbX2AsLDImJiff4+MbHysjIyoCBgsXGyHp6er6+vsDVKm5ucOTk5XFxc83O0MbGx2FhYm1tbsDWLKWlpu70xRkZGkVFRtPU1pydoM/Q0bKztKamqCQkJeLi5O/w8Glpab/AwtjY2f7+/WtrbcfIytjZ26qrrDc4OdHS0nBxc7/VJ5KTlI6Oj9LS0/v8/b7UI3JzdMPDxIqKi5aWl7y9vi4uL8fHx3BwcNvc3pKSk62usCsrLN/f4Ly8vZydnp2dndXV1snJycXGym5vcefn6IuMjYWFhYODhiMjJCYmJ+fo6UhISR8fH/7+/hsbHP39/ejo6cHWLu/v8Lq7vPv7++nq6+3u7q+wsby9wL6/wvj4+Pz8/Pr6+vLy8+bn6O7u7vj4+e3u7/f3+PT19fn5+ff39/T09Pb29+jo6MHWL/b29vLy8vT09e7v8L2+v/Pz9O7u7/39/vHy9L2+wbi6ve/v7+no6fz9/fn6+vj5+fv7/Pr7+////v7//8XGx/X19vX29vb39+7v7/z8/enp6uPk5fr6+/n5+g8PENTU1Hh4eYeHh05OT+fo6JGSk0BAQOTl6CAgIS8vML+/wHNzc5eYmLa3t+Xm54OEhfn4+Y+PkFdXV1hZWv3++IiIiJGRkZubm3t8ff7+/35/gOjp6ru8vmRkZMTFyLO0tWJiY6eoqycnKGxsbkNDQ77TIl5eX6Kjo+Xm6QcHBwgICZSUlvLz8y0tLv///wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDAzQjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA0QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDFCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDJCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMi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">',o='<img class="playback-move-hand" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHtAPf/AJ2dnfT09KWlpZWVlejo6bGxsRwcHHl5eYmJiRMTFOrq66GhoYWFhcHCxObm54GBgdjY2GFhYcXGydPT0+Dg4OPj4319fQsLC0ZGRuTk5GlpaVVVVV5eXpGRkXFxcd7e3kFBQXV1ddbW1lJSUsDAwNvb221tbk1OTgMDAykpKaurqzw9PdTU1FlZWdzc3JiYmMjKzLu7u8jIyJubnPLy9M7Ozr2/wUlJSTo6OsLCwmRkZDY2NtDQ0DIyMr29vaytsKysrC4uLra2ttHS1CUlJtXX2MrKy6+vr5qamiEhIczMzM3O0LS0tMTExMbGxsbIyt7e4I2Njby8vOTl5qioqMPEx+rr7KqqrOjo6np6fNTV17i4uMzNzo+Pj3Z3ePHx8rm7veDh4uzt7r/AwoeHh8PDxM/Q0sTFx42OkMDBw+fo6bW3utjZ2vHy8tHR0sjJyru8v+Xl5d3d3dzc3mNjZJ+fn2pra+np6t/f4OLj5NPT1V9fYFdXV8HCxsDBxbO0tq6vsqqsrk9PT0tLS5KTlGdnZ4uMjn1+gHd4e1JTUzs7PEJCQzMzMysrK+fn6P7+/v////39/fPz8+7u7/z8/Pv7+/f39/b29vr6+vj4+Pn5+e7u7vLy8u/v7+3t7ezs7PDw8Ozs7fHx8fDw8fb29/Ly8/X19fr6+/z8/fn5+tvc3e/v8HNzdKmpqvf3+CMjJPDx8fP09OPk5ZmZmvj5+Xt8flBQUP39/mtsbvLz8+/w8Nra3NXW15+govr7+x8fH7m5uicnJ+fn6ezt7Zqcn7Kzs7S0s1hYWLe4uvz9/aanqq2trf3+/ouLi2NkZqOjo5aXmqKkppeYmmBgYPv7/JSVl4ODg4eHihcXFw8PD/7//9HS0kBAQOHh4mhoa0RERDAwMPf4+AcHB+vr7NfX11xcXKenp5manJqameXm6ExMTcjHyfv8/G9vb/j4+UdHRywsLHN0dj4+PsrLzTQ0NObm6Obn6efm6Ly9v39/fzc4OL2+v+3s7fb39wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDA3QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA4QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDVCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDZCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMi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" />';r.prototype={resetTimers:function(){this.timeSinceLastFrame=0,this.lastFrameTime=null},setupLoops:function(){var e=this;this.stepFrameLoop=function(t){"playing"==e.state&&(e.sendFrameAt(t||performance.now()),requestAnimationFrame(e.stepFrameLoop))}},setupProtocols:function(){var e=this;this.stopProtocol=this.controller.connection.protocol,this.playbackProtocol=function(t){var n=e.stopProtocol(t);return n instanceof Leap.Frame?(e.pauseOnHand&&(t.hands.length>0?(e.userHasControl=!0,e.controller.emit("playback.userTakeControl"),e.setGraphic(),e.idle()):0==t.hands.length&&e.userHasControl&&e.resumeOnHandLost&&(e.userHasControl=!1,e.controller.emit("playback.userReleaseControl"),e.setGraphic("wave"))),{type:"playback"}):n},this.recordProtocol=function(t){var n=e.stopProtocol(t);return n instanceof Leap.Frame&&e.recordFrameHandler(t),n};for(var t in this.stopProtocol)this.stopProtocol.hasOwnProperty(t)&&(this.playbackProtocol[t]=this.stopProtocol[t],this.recordProtocol[t]=this.stopProtocol[t]);"playing"==this.state&&(this.controller.connection.protocol=this.playbackProtocol)},sendFrameAt:function(e){this.lastFrameTime&&(e<this.lastFrameTime?this.lastFrameTime=e:this.timeSinceLastFrame+=e-this.lastFrameTime),this.lastFrameTime=e;for(var t;this.timeSinceLastFrame>(t=this.recording.timeToNextFrame());)if(this.timeSinceLastFrame-=t,!this.recording.advanceFrame())return this.pause(),void this.controller.emit("playback.playbackFinished",this);this.sendFrame(this.recording.createLerpFrameData(this.timeSinceLastFrame/t))},sendFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFrame(t),!0},sendImmediateFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFinishedFrame(t),!0},setFrameIndex:function(e){e!=this.recording.frameIndex&&(this.recording.frameIndex=e%this.recording.frameCount,this.sendFrame(this.recording.currentFrame()))},stop:function(){this.idle(),delete this.recording,this.recording=new n({timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,requestProtocolVersion:this.controller.connection.opts.requestProtocolVersion,serviceVersion:this.controller.connection.protocol.serviceVersion}),this.controller.emit("playback.stop",this)},pause:function(){this.state="idle",this.hideOverlay(),this.controller.emit("playback.pause",this)},idle:function(){this.state="idle",this.controller.connection.protocol=this.stopProtocol},toggle:function(){"idle"==this.state?this.play():"playing"==this.state&&this.pause()},record:function(){this.clear(),this.stop(),this.state="recording",this.controller.connection.protocol=this.recordProtocol,this.setGraphic("connect"),this.controller.emit("playback.record",this)},clear:function(){if(this.recording&&!this.recording.blank()){var e=this.recording.cloneCurrentFrame();e.hands=[],e.fingers=[],e.pointables=[],e.tools=[],this.sendImmediateFrame(e)}},recordPending:function(){return"recording"==this.state&&this.recording.blank()},isRecording:function(){return"recording"==this.state&&!this.recording.blank()},finishRecording:function(){this.controller.connection.protocol=this.playbackProtocol,this.recording.setFrames(this.recording.frameData),this.controller.emit("playback.recordingFinished",this)},loaded:function(){return this.recording.loaded()},loading:function(){return this.recording.loading},play:function(){if("playing"!==this.state&&!this.loading()&&!this.recording.blank()){this.state="playing",this.controller.connection.protocol=this.playbackProtocol;var e=this;this.controller.connection.removeAllListeners("frame"),this.controller.connection.on("frame",function(t){e.resumeOnHandLost&&e.autoPlay&&"idle"==e.state&&0==t.hands.length&&e.play(),e.controller.processFrame(t)}),this.resetTimers(),this.recording.readyPlay(),this.stepFrameLoop(),this.controller.emit("playback.play",this)}},recordFrameHandler:function(e){this.setGraphic("wave"),e.hands.length>0?(this.recording.addFrame(e),this.hideOverlay()):this.recording.blank()||this.finishRecording()},setRecording:function(e){var t=this;this.pause();var r=function(e){return this.setFrames(e),t.recording!=this?void console.log("recordings changed during load"):(t.autoPlay&&(t.play(),t.pauseOnHand&&!t.controller.streaming()&&t.setGraphic("connect")),void t.controller.emit("playback.recordingSet",this))};return this.recording=e,e instanceof n||(this.recording.__proto__=n.prototype,n.call(this.recording,{timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,loadProgress:function(e,n,r){t.controller.emit("playback.ajax:progress",e,n,r)}})),this.recording.loaded()?r.call(this.recording,this.recording.frameData):e.url&&(this.controller.emit("playback.ajax:begin",this,this.recording),this.recording.loadFrameData(function(e){r.call(this,e),t.controller.emit("playback.ajax:complete",t,this)})),this},hideOverlay:function(){this.overlay&&(this.overlay.style.display="none")},setGraphic:function(e){if(this.overlay&&this.graphicName!=e)switch(this.graphicName=e,e){case"connect":this.overlay.style.display="block",this.overlay.innerHTML=i;break;case"wave":this.overlay.style.display="block",this.overlay.innerHTML=o;break;case t:this.overlay.innerHTML=""}}};var a=function(n){var i=this,o=n.autoPlay;o===t&&(o=!0);var a=n.pauseOnHand;a===t&&(a=!0);var s=n.resumeOnHandLost;s===t&&(s=!0);var c=n.timeBetweenLoops;c===t&&(c=50);var l=n.requiredProtocolVersion,u=n.pauseHotkey;u===t&&(u=32);var h=n.loop;h===t&&(h=!0);var d=n.overlay;d===t&&document.body&&(d=document.createElement("div"),document.body.appendChild(d),d.style.width="100%",d.style.position="absolute",d.style.top="0",d.style.left="-"+e.getComputedStyle(document.body).getPropertyValue("margin"),d.style.padding="10px",d.style.textAlign="center",d.style.fontSize="18px",d.style.opacity="0.8",d.style.display="none",d.style.zIndex="10",d.id="connect-leap",d.style.cursor="pointer",d.addEventListener("click",function(){return this.style.display="none",!1},!1)),n.player=new r(this,{recording:n.recording,loop:h,pauseHotkey:u,timeBetweenLoops:c}),n.player.overlay=d,n.player.pauseOnHand=a,n.player.resumeOnHandLost=s,n.player.requiredProtocolVersion=l,n.player.autoPlay=o;var p=function(){return n.player.pauseOnHand&&i.connection.opts.requestProtocolVersion<n.requiredProtocolVersion?(console.log("Protocol Version too old ("+i.connection.opts.requestProtocolVersion+"), disabling device interaction."),void(n.player.pauseOnHand=!1)):(o&&(i.on("streamingStarted",function(){"recording"==n.player.state?(n.player.pause(),n.player.setGraphic("wave")):a?n.player.setGraphic("wave"):n.player.setGraphic()}),i.on("streamingStopped",function(){n.player.play()})),void i.on("streamingStopped",function(){n.player.setGraphic("connect")}))};return this.connection.connected?p():this.on("ready",p),{}};if("undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("playback",a);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.playback=a}}.call(this)}(window),function(){var e;if(e=function(e){var t,n,r,i;return null==e&&(e={}),e.positioning||(e.positioning="absolute"),e.scale||(e.scale=1),e.scaleX||(e.scaleX=1),e.scaleY||(e.scaleY=1),e.scaleZ||(e.scaleZ=1),e.verticalOffset||(e.verticalOffset=0),t=6,n=-100,i={absolute:function(r){return[window.innerWidth/2+r[0]*t*e.scale*e.scaleX,window.innerHeight+n+e.verticalOffset-r[1]*t*e.scale*e.scaleY,r[2]*t*e.scale*e.scaleZ]}},r=function(t,n){var r;return null==n&&(n=!1),r="function"==typeof e.positioning?e.positioning.call(this,t):i[e.positioning].call(this,t),n&&(this.screenPositionVec3=r),r},{hand:{screenPosition:function(e){return r.call(this,e||this.palmPosition,!e)}},pointable:{screenPosition:function(e){return r.call(this,e||this.tipPosition,!e)}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("screenPosition",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.screenPosition=e}}.call(this),function(){var e=[].slice;Leap.plugin("transform",function(t){var n,r,i,o,a,s;return null==t&&(t={}),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=new THREE.Matrix4,t.vr===!0&&(this.setOptimizeHMD(!0),t.quaternion=(new THREE.Quaternion).setFromRotationMatrix((new THREE.Matrix4).set(-1,0,0,0,0,0,-1,0,0,-1,0,0,0,0,0,1)),t.scale=.001,t.position=new THREE.Vector3(0,0,(-.08))),t.getTransform=function(e){var r;return t.matrix?(r="function"==typeof t.matrix?t.matrix(e):t.matrix,
window.THREE&&r instanceof THREE.Matrix4?r.elements:r):t.position||t.quaternion||t.scale?(s.set.apply(s,n),t.quaternion&&s.makeRotationFromQuaternion("function"==typeof t.quaternion?t.quaternion(e):t.quaternion),t.position&&s.setPosition("function"==typeof t.position?t.position(e):t.position),s.elements):n},t.getScale=function(e){return isNaN(t.scale)||(t.scale=new THREE.Vector3(t.scale,t.scale,t.scale)),"function"==typeof t.scale?t.scale(e):t.scale},o=function(){var t,n,r,i,o,a;for(t=arguments[0],r=2<=arguments.length?e.call(arguments,1):[],a=[],i=0,o=r.length;i<o;i++)n=r[i],n?a.push(Leap.vec3.transformMat4(n,n,t)):a.push(void 0);return a},i=function(e,t,n){var r,i,o;return r=t[0],i=t[1],o=t[2],e[0]=n[0]*r+n[4]*i+n[8]*o,e[1]=n[1]*r+n[5]*i+n[9]*o,e[2]=n[2]*r+n[6]*i+n[10]*o,e},r=function(){var t,n,r,o,a,s;for(t=arguments[0],r=2<=arguments.length?e.call(arguments,1):[],s=[],o=0,a=r.length;o<a;o++)n=r[o],n?s.push(i(n,n,t)):s.push(void 0);return s},a=function(e,t,n){var i,a,s,c,l,u,h,d;for(r(t,e.direction,e.palmNormal,e.palmVelocity,e.arm.basis[0],e.arm.basis[1],e.arm.basis[2]),h=e.fingers,s=0,l=h.length;s<l;s++)i=h[s],r(t,i.direction,i.metacarpal.basis[0],i.metacarpal.basis[1],i.metacarpal.basis[2],i.proximal.basis[0],i.proximal.basis[1],i.proximal.basis[2],i.medial.basis[0],i.medial.basis[1],i.medial.basis[2],i.distal.basis[0],i.distal.basis[1],i.distal.basis[2]);for(Leap.glMatrix.mat4.scale(t,t,n),o(t,e.palmPosition,e.stabilizedPalmPosition,e.sphereCenter,e.arm.nextJoint,e.arm.prevJoint),d=e.fingers,c=0,u=d.length;c<u;c++)i=d[c],o(t,i.carpPosition,i.mcpPosition,i.pipPosition,i.dipPosition,i.distal.nextJoint,i.tipPosition);return a=(n[0]+n[1]+n[2])/3,e.arm.width*=a},{frame:function(e){var n,r,i,o,s,c,l,u,h,d;if(e.valid&&!e.data.transformed){for(e.data.transformed=!0,u=e.hands,d=[],o=0,c=u.length;o<c;o++){for(r=u[o],a(r,t.getTransform(r),(t.getScale(r)||new THREE.Vector3(1,1,1)).toArray()),t.effectiveParent&&a(r,t.effectiveParent.matrixWorld.elements,t.effectiveParent.scale.toArray()),i=null,h=r.fingers,s=0,l=h.length;s<l;s++)n=h[s],i=Leap.vec3.create(),Leap.vec3.sub(i,n.mcpPosition,n.carpPosition),n.metacarpal.length=Leap.vec3.length(i),Leap.vec3.sub(i,n.pipPosition,n.mcpPosition),n.proximal.length=Leap.vec3.length(i),Leap.vec3.sub(i,n.dipPosition,n.pipPosition),n.medial.length=Leap.vec3.length(i),Leap.vec3.sub(i,n.tipPosition,n.dipPosition),n.distal.length=Leap.vec3.length(i);Leap.vec3.sub(i,r.arm.prevJoint,r.arm.nextJoint),d.push(r.arm.length=Leap.vec3.length(i))}return d}}}})}.call(this),function(){var e;if(e=function(e){return e.alert||(e.alert=!1),e.requiredProtocolVersion||(e.requiredProtocolVersion=6),e.disconnect||(e.disconnect=!0),"undefined"!=typeof Leap&&Leap.Controller&&Leap.version.minor<5&&Leap.version.dot<4&&console.warn("LeapJS Version Check plugin incompatible with LeapJS pre 0.4.4"),this.on("ready",function(){var t,n,r;if(r=e.requiredProtocolVersion,t=this.connection.opts.requestProtocolVersion,t<r)return n="Protocol Version too old. v"+r+" required, v"+t+" available.",e.disconnect&&(this.disconnect(),n+=" Disconnecting."),console.warn(n),e.alert&&alert("Your Leap Software version is out of date.  Visit http://www.leapmotion.com/setup to update"),this.emit("versionCheck.outdated",{required:r,current:t,disconnect:e.disconnect})}),{}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("versionCheck",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.versionCheck=e}}.call(this);var Stats=function(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,s=0,c=0,l=0,u=document.createElement("div");u.id="stats",u.addEventListener("mousedown",function(e){e.preventDefault(),A(++l%2)},!1),u.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",u.appendChild(h);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",h.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(p);p.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",u.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);g.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(f)}var A=function(e){switch(l=e){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}},y=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:12,domElement:u,setMode:A,begin:function(){e=Date.now()},end:function(){var l=Date.now();return n=l-e,r=Math.min(r,n),i=Math.max(i,n),v.textContent=n+" MS ("+r+"-"+i+")",y(g,Math.min(30,30-n/200*30)),c++,l>t+1e3&&(o=Math.round(1e3*c/(l-t)),a=Math.min(a,o),s=Math.max(s,o),d.textContent=o+" FPS ("+a+"-"+s+")",y(p,Math.min(30,30-o/100*30)),t=l,c=0),l},update:function(){e=this.end()}}};"object"==typeof module&&(module.exports=Stats);var Clock=function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1};Clock.prototype.start=function(){this.startTime=Date.now(),this.oldTime=this.startTime,this.running=!0},Clock.prototype.stop=function(){this.getElapsedTime(),this.running=!1},Clock.prototype.getElapsedTime=function(){return this.elapsedTime+=this.getDelta(),this.elapsedTime},Clock.prototype.getDelta=function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e},THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.BokehShader={uniforms:{tColor:{type:"t",value:null},tDepth:{type:"t",value:null},focus:{type:"f",value:1},aspect:{type:"f",value:1},aperture:{type:"f",value:.025},maxblur:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float focus;","uniform float aspect;","void main() {","vec2 aspectcorrect = vec2( 1.0, aspect );","vec4 depth1 = texture2D( tDepth, vUv );","float factor = depth1.x - focus;","vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","vec2 dofblur9 = dofblur * 0.9;","vec2 dofblur7 = dofblur * 0.7;","vec2 dofblur4 = dofblur * 0.4;","vec4 col = vec4( 0.0 );","col += texture2D( tColor, vUv.xy );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","gl_FragColor = col / 41.0;","gl_FragColor.a = 1.0;","}"].join("\n")},THREE.ConvolutionShader={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{type:"t",value:null},uImageIncrement:{type:"v2",value:new THREE.Vector2(.001953125,0)},cKernel:{type:"fv1",value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vec2 imageCoord = vUv;","vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","imageCoord += uImageIncrement;","}","gl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){function t(e,t){return Math.exp(-(e*e)/(2*t*t))}var n,r,i,o,a=25,s=2*Math.ceil(3*e)+1;for(s>a&&(s=a),o=.5*(s-1),r=new Array(s),i=0,n=0;n<s;++n)r[n]=t(n-o,e),i+=r[n];for(n=0;n<s;++n)r[n]/=i;return r}},THREE.FilmShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")},THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n=e.getPixelRatio(),r=Math.floor(e.context.canvas.width/n)||1,i=Math.floor(e.context.canvas.height/n)||1,o={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};t=new THREE.WebGLRenderTarget(r,i,o)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t,n,r=!1,i=this.passes.length;for(n=0;n<i;n++)if(t=this.passes[n],t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof THREE.MaskPass?r=!0:t instanceof THREE.ClearMaskPass&&(r=!1)}},reset:function(e){if(void 0===e){e=this.renderTarget1.clone();var t=this.renderer.getPixelRatio();e.width=Math.floor(this.renderer.context.canvas.width/t),e.height=Math.floor(this.renderer.context.canvas.height/t)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){var n=this.renderTarget1.clone();n.width=e,n.height=t,this.reset(n)}},THREE.RenderPass=function(e,t,n,r,i){this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,t,n,r){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,n,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}},THREE.ShaderPass=function(e,t){this.textureID=void 0!==t?t:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,t,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}},THREE.MaskPass=function(e,t){this.scene=e,this.camera=t,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.colorMask(!1,!1,!1,!1),i.depthMask(!1);var o,a;this.inverse?(o=0,a=1):(o=1,a=0),i.enable(i.STENCIL_TEST),i.stencilOp(i.REPLACE,i.REPLACE,i.REPLACE),i.stencilFunc(i.ALWAYS,o,4294967295),i.clearStencil(a),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.stencilFunc(i.EQUAL,1,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.disable(i.STENCIL_TEST)}},THREE.BokehPass=function(e,t,n){this.scene=e,this.camera=t;var r=void 0!==n.focus?n.focus:1,i=void 0!==n.aspect?n.aspect:t.aspect,o=void 0!==n.aperture?n.aperture:.025,a=void 0!==n.maxblur?n.maxblur:1,s=n.width||window.innerWidth||1,c=n.height||window.innerHeight||1;this.renderTargetColor=new THREE.WebGLRenderTarget(s,c,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),this.renderTargetDepth=this.renderTargetColor.clone(),this.materialDepth=new THREE.MeshDepthMaterial,void 0===THREE.BokehShader&&console.error("THREE.BokehPass relies on THREE.BokehShader");var l=THREE.BokehShader,u=THREE.UniformsUtils.clone(l.uniforms);u.tDepth.value=this.renderTargetDepth,u.focus.value=r,u.aspect.value=i,u.aperture.value=o,u.maxblur.value=a,this.materialBokeh=new THREE.ShaderMaterial({uniforms:u,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.uniforms=u,this.enabled=!0,this.needsSwap=!1,this.renderToScreen=!1,this.clear=!1,this.camera2=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene2.add(this.quad2)},THREE.BokehPass.prototype={render:function(e,t,n,r,i){this.quad2.material=this.materialBokeh,this.scene.overrideMaterial=this.materialDepth,e.render(this.scene,this.camera,this.renderTargetDepth,!0),this.uniforms.tColor.value=n,this.renderToScreen?e.render(this.scene2,this.camera2):e.render(this.scene2,this.camera2,t,this.clear),this.scene.overrideMaterial=null}},THREE.BloomPass=function(e,t,n,r){e=void 0!==e?e:1,t=void 0!==t?t:25,n=void 0!==n?n:4,r=void 0!==r?r:256;var i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat};this.renderTargetX=new THREE.WebGLRenderTarget(r,r,i),this.renderTargetY=new THREE.WebGLRenderTarget(r,r,i),void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var o=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(o.uniforms),this.copyUniforms.opacity.value=e,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:THREE.AdditiveBlending,transparent:!0}),void 0===THREE.ConvolutionShader&&console.error("THREE.BloomPass relies on THREE.ConvolutionShader");var a=THREE.ConvolutionShader;this.convolutionUniforms=THREE.UniformsUtils.clone(a.uniforms),this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurX,this.convolutionUniforms.cKernel.value=THREE.ConvolutionShader.buildKernel(n),this.materialConvolution=new THREE.ShaderMaterial({uniforms:this.convolutionUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.enabled=!0,this.needsSwap=!1,this.clear=!1,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.BloomPass.prototype={render:function(e,t,n,r,i){i&&e.context.disable(e.context.STENCIL_TEST),this.quad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=n,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurX,e.render(this.scene,this.camera,this.renderTargetX,!0),this.convolutionUniforms.tDiffuse.value=this.renderTargetX,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurY,e.render(this.scene,this.camera,this.renderTargetY,!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,n,this.clear)}},THREE.BloomPass.blurX=new THREE.Vector2(.001953125,0),THREE.BloomPass.blurY=new THREE.Vector2(0,.001953125),THREE.FilmPass=function(e,t,n,r){void 0===THREE.FilmShader&&console.error("THREE.FilmPass relies on THREE.FilmShader");var i=THREE.FilmShader;this.uniforms=THREE.UniformsUtils.clone(i.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),void 0!==r&&(this.uniforms.grayscale.value=r),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==n&&(this.uniforms.sCount.value=n),this.enabled=!0,this.renderToScreen=!1,this.needsSwap=!0,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.FilmPass.prototype={render:function(e,t,n,r){this.uniforms.tDiffuse.value=n,this.uniforms.time.value+=r,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,!1)}},function(){nop={};var e={};nop.Utils=e,e.isMobile=function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),e.toRadians=function(e){return e*Math.PI/180},e.toDegrees=function(e){return 180*e/Math.PI},e.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},e.rgbToHex=function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},e.loadTextFile=function(e){var t,n=new XMLHttpRequest;return n.onerror=function(){console.log("Error: request error on "+e)},n.onload=function(){t=this.responseText},n.open("GET",e,!1),n.send(),t},e.loadTextFileInject=function(t){var n=/#inject .+/g,r=e.loadTextFile(t),i=r.match(n);if(!i)return r;for(var o=0;o<i.length;o++){var a=i[o],s=a.split(" ")[1],c=e.loadTextFileInject(s);r=r.replace(a,c)}return r},e.openUrlInNewWindow=function(e,t,n){window.open(e,"Screenshot","width="+t+" height="+n+" scrollbars=no, resizable=yes")},e.dataUrlToBlob=function(e){var t,n,r,i=";base64,";if(e.indexOf(i)===-1)return t=e.split(","),n=t[0].split(":")[1],r=decodeURIComponent(t[1]),new Blob([r],{type:n});t=e.split(i),n=t[0].split(":")[1],r=window.atob(t[1]);for(var o=r.length,a=new Uint8Array(o),s=0;s<o;++s)a[s]=r.charCodeAt(s);return new Blob([a],{type:n})},e.dataUrlToBlobUrl=function(t){return window.URL.createObjectURL(e.dataUrlToBlob(t))},e.toggleFullscreen=function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},e.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},e.shuffle=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),r-=1,t=e[r],e[r]=e[n],e[n]=t;return e}}(),nop.RenderContext=function(e){var t,n,r,i,o,a,s=e,c={canvas:s,alpha:!1,depth:!0,stencil:!1,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,logarithmicDepthBuffer:!1,autoClear:!1,clearColor:0,clearAlpha:0,sortObjects:!0,shadowMapEnabled:!1,shadowMapType:THREE.PCFShadowMap,shadowMapCullFace:THREE.CullFaceFront,shadowMapDebug:!1},l={fov:60,near:1,far:1e3},u=function(){t=new THREE.WebGLRenderer(c),t.setSize(n,r),t.setClearColor(c.clearColor,c.clearAlpha),t.autoClear=c.autoClear,t.sortObjects=c.sortObjects,t.shadowMapEnabled=c.shadowMapEnabled,t.shadowMapType=c.shadowMapType,t.shadowMapCullFace=c.shadowMapCullFace,t.shadowMapDebug=c.shadowMapDebug};this.init=function(){n=s.clientWidth,r=s.clientHeight,i=n/r,u(),o=new THREE.PerspectiveCamera(l.fov,i,l.near,l.far),a=new THREE.Scene},this.setSize=function(e,a){n=e,r=a,i=n/r,t.setSize(n,r),o.aspect=i,o.updateProjectionMatrix()},this.render=function(e){t.render(a,o,e)},this.getRenderer=function(){return t},this.getScene=function(){return a},this.getCamera=function(){return o}},nop.RenderContext.prototype.constructor=nop.RenderContext,nop.UpdateLoop=function(){var e,t=this,n=0,r=1,i=0,o=0,a=.02,s=.2,c=new Clock((!1)),l=function(){var e=a*r;i+=e,t.fixedCallback(e,i)},u=function(){var e=c.getDelta();for(n+=e*r,o+=e,o>s&&(o=s);o>a;)l(),o-=a;t.frameCallback(e,n)},h=function(){u(),e=window.requestAnimationFrame(h)};this.start=function(){e||(c.start(),h())},this.stop=function(){e&&(window.cancelAnimationFrame(e),e=void 0,c.stop())},this.setTimeScale=function(e){r=Math.max(e,0)},this.fixedCallback=function(e,t){},this.frameCallback=function(e,t){}},nop.UpdateLoop.prototype.constructor=nop.UpdateLoop,nop.ShaderPass=function(e){e instanceof THREE.Material?this.material=e:this.material=nop.ShaderPass.createShaderMaterial(e),this.material.blending=THREE.NoBlending,this.material.depthWrite=!1,this.material.depthTest=!1;var t=new THREE.BufferGeometry,n=new Float32Array(9);n[0]=-1,n[1]=-1,n[2]=0,n[3]=3,n[4]=-1,n[5]=0,n[6]=-1,n[7]=3,n[8]=0;var r=new Float32Array(6);r[0]=0,r[1]=0,r[2]=2,r[3]=0,r[4]=0,r[5]=2,t.addAttribute("position",new THREE.BufferAttribute(n,3)),t.addAttribute("uv",new THREE.BufferAttribute(r,2)),this.mesh=new THREE.Mesh(t,this.material),this.scene=new THREE.Scene,this.scene.add(this.mesh),this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.clear=!1},nop.ShaderPass.prototype.render=function(e,t){e.render(this.scene,this.camera,t,this.clear)},nop.ShaderPass.cloneDefines=function(e){var t={};for(var n in e)t[n]=e[n];return t},nop.ShaderPass.createShaderMaterial=function(e){return new THREE.ShaderMaterial({defines:nop.ShaderPass.cloneDefines(e.defines),uniforms:THREE.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})},nop.LandscapeShader={uniforms:{uTime:{type:"f",value:0},tChannels:{type:"t",value:null},uChannelSum:{type:"f",value:0}},vertexShader:nop.Utils.loadTextFileInject("shaders/LandscapeShader.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/LandscapeShader.fs.glsl")},nop.LandscapeDepthShader={uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:100}},vertexShader:nop.Utils.loadTextFileInject("shaders/LandscapeShader.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/DepthShader.fs.glsl")},nop.PostShader={uniforms:{tDiffuse:{type:"t",value:null},uTime:{type:"f",value:0},uHV:{type:"v2",value:new THREE.Vector2}},vertexShader:nop.Utils.loadTextFile("shaders/Basic.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/PostShader.fs.glsl")},nop.TestShader={uniforms:{tDiffuse:{type:"t",value:null}},vertexShader:nop.Utils.loadTextFile("shaders/Basic.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/TestShader.fs.glsl")},nop.ParticleShader={uniforms:{uTime:{type:"f",value:0}},vertexShader:nop.Utils.loadTextFileInject("shaders/ParticleShader.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/ParticleShader.fs.glsl")},nop.BackgroundShader={uniforms:{uTime:{type:"f",value:0},uCamDir:{type:"v3",value:new THREE.Vector3},uCamUp:{type:"v3",value:new THREE.Vector3}},vertexShader:nop.Utils.loadTextFileInject("shaders/Basic.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/BackgroundShader.fs.glsl")},nop.VizShader={uniforms:{tChannels:{type:"t",value:null}},vertexShader:nop.Utils.loadTextFile("shaders/Basic.vs.glsl"),fragmentShader:nop.Utils.loadTextFileInject("shaders/VizShader.fs.glsl")},nop.FlyControls=function(e,t){var n,r,i=10,o=1,a=e,s=t,c=0,l=0,u=0,h=0;this.enableAutoLevel=!0;var d=!1,p=function(){n=new THREE.Object3D,r=new THREE.Object3D,n.add(r),r.add(a),r.rotation.order="YXZ",s.addEventListener("mousemove",m),s.addEventListener("touchmove",v),s.addEventListener("mouseout",g),s.addEventListener("touchend",g)},f=function(e,t){var n=2*(1-t/s.clientHeight-.5),r=2*(e/s.clientWidth-.5)*s.clientWidth/s.clientHeight;c=-r,l=n,d=!0},m=function(e){f(e.clientX,e.clientY)},v=function(e){e.preventDefault();var t=e.changedTouches,n=t[0];f(n.clientX,n.clientY)},g=function(e){d=!1};this.getObject=function(){return n},this.setDirection=function(e,t){c=e,l=t},this.setSpeed=function(e){
i=e},this.update=function(e,t){u+=c*e,h+=l*e;var s=.25;r.rotation.y=u,r.rotation.x=h,r.rotation.z=Math.max(Math.min(c*s,Math.PI/2),-Math.PI/2);var p=a.getWorldDirection();n.position.x+=p.x*i*e,n.position.y+=p.y*i*e,n.position.z+=p.z*i*e,n.position.y=Math.max(n.position.y,o),this.enableAutoLevel&&!d&&this.updateAutoLevel(e,t)},this.updateAutoLevel=function(e,t){var n=a.getWorldDirection(),r=180*Math.asin(n.y)/Math.PI;l=-r*e,c+=-c*e},this.reset=function(){n.position.set(0,0,0),r.rotation.set(0,0,0),u=c=0,h=l=0},p()},nop.LeapManager=function(e,t,n){var r,i,o,a=!1,s=4;this.renderer=e,this.camera=t,this.matrix=n,this.followCamera=!0,this.frame=void 0,this.palmPositions=[];for(var c=0;c<s;c++)this.palmPositions.push(new THREE.Vector3);this.activeHandCount=0,this.update=function(){this.followCamera?i.matrix.multiplyMatrices(this.camera.matrixWorld,this.matrix):i.matrix.copy(this.matrix),i.matrixWorldNeedsUpdate=!0,this.frame=o.frame(),this.activeHandCount=Math.min(this.frame.hands.length,s);for(var e=0;e<this.activeHandCount;e++){var t=this.frame.hands[e].palmPosition;this.palmPositions[e].set(t[0],t[1],t[2]),this.palmPositions[e].applyMatrix4(i.matrix)}},this.render=function(e,t){this.renderer.render(r,this.camera,e,t)},this.isConnected=function(){return a},r=new THREE.Scene,r.overrideMaterial=new THREE.MeshBasicMaterial({color:16777215,opacity:.25,transparent:!0}),i=new THREE.Object3D,i.matrixAutoUpdate=!1,r.add(i),o=new Leap.Controller,o.use("boneHand",{render:function(){},scene:i,arm:!1}).connect(),o.on("deviceAttached",function(){console.log("Leap device attached"),a=!0}),o.on("deviceRemoved",function(){console.log("Leap device removed"),a=!1}),o.on("deviceConnected",function(){console.log("Leap device connected"),a=!0}),o.on("deviceDisconnected",function(){console.log("Leap device disconnected"),a=!1})},nop.App=function(){console.log("hello world!");var e,t,n,r,i,o,a,s,c,l,u,h,d=10,p=128,f=p/2,m=100,v={enabled:!0},g=26,A=1,y={w:g,h:A,data:new Uint8Array(g*A),sum:0},E=!1,w={},b=function(){var e=window.innerWidth,t=window.innerHeight;r.setSize(e,t),v.enabled&&(v.composer.renderTarget1=new THREE.WebGLRenderTarget(e,t,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1}),v.composer.renderTarget2=v.composer.renderTarget1.clone())},x=function(e,t){n.end(),n.begin(),u.isConnected()&&I(e,t),h.update(e,t);var r=i.getWorldPosition(),o=i.getWorldDirection();o.y=0,o.normalize(),a.position.x=Math.round(r.x+o.x*f),a.position.z=Math.round(r.z+o.z*f),r.y>m&&h.reset(),w.update(e,t),s.uniforms.uTime.value=t,l.material.uniforms.uTime.value=t;var c=new THREE.Vector4;c.set(0,0,-1,0),c.applyMatrix4(i.matrixWorld),l.material.uniforms.uCamDir.value.set(c.x,c.y,c.z),c.set(0,1,0,0),c.applyMatrix4(i.matrixWorld),l.material.uniforms.uCamUp.value.set(c.x,c.y,c.z),v.enabled?(S(v.composer.writeBuffer),v.composer.render()):S()},C=function(e,t){},M=function(){t=new nop.UpdateLoop,t.frameCallback=x,t.fixedCallback=C,e=document.querySelector("#webgl-canvas"),n=new Stats,n.domElement.style.position="absolute",n.domElement.style.left="0px",n.domElement.style.top="0px",e.parentElement.appendChild(n.domElement),r=new nop.RenderContext(e),r.init(),i=r.getCamera(),o=r.getScene(),window.addEventListener("resize",b,!1),v.enabled&&v.init(),T(),w.init(),P()},T=function(){var t=new THREE.PlaneBufferGeometry(p,p,p,p);s=nop.ShaderPass.createShaderMaterial(nop.LandscapeShader),s.defines.SIZE=p.toFixed(1),a=new THREE.Mesh(t,s),a.rotation.x=-Math.PI/2,o.add(a),h=new nop.FlyControls(i,e),h.getObject().position.y=2,o.add(h.getObject());var n=(new THREE.Matrix4).compose(new THREE.Vector3(0,(-3),(-8)),new THREE.Quaternion,new THREE.Vector3(.015,.015,.015));u=new nop.LeapManager(r.getRenderer(),i,n),l=new nop.ShaderPass(nop.BackgroundShader),c=new nop.ShaderPass(nop.VizShader),c.material.transparent=!0,c.material.blending=THREE.NormalBlending};v.init=function(){var e=new THREE.BloomPass(1.5),t=new THREE.FilmPass(.5,.4,1024,0),n=new THREE.EffectComposer(r.getRenderer());n.addPass(e),n.addPass(t),t.renderToScreen=!0,v.composer=n};var S=function(e){r.getRenderer().clearTarget(e),l.render(r.getRenderer(),e),r.render(e),u.render(e),E&&c.render(r.getRenderer(),e)},R=0,I=function(e,t){if(u.update(),u.frame.hands[0]){for(var n=0,r=0,i=0,o=0;o<u.frame.hands.length;o++){var a=u.frame.hands[o];n+=a.pitch()-.05*Math.PI,r+=a.roll(),i+=.2*d+.1*a.sphereRadius}n/=u.frame.hands.length,r/=u.frame.hands.length,i/=u.frame.hands.length,h.setDirection(r,n),h.setSpeed(i),R=r,h.enableAutoLevel=!1}else h.setSpeed(d),h.enableAutoLevel=!0};w.init=function(){this.DIM=128,this.count=4096,this.geo=new THREE.Geometry;for(var e=0;e<this.count;e++)this.geo.vertices.push(new THREE.Vector3(2*Math.random()*this.DIM-this.DIM,2*Math.random()*this.DIM-this.DIM,2*Math.random()*this.DIM-this.DIM));this.mat=nop.ShaderPass.createShaderMaterial(nop.ParticleShader),this.mat.defines.BBOX_DIM=this.DIM.toFixed(1),this.mat.blending=THREE.AdditiveBlending,this.mat.transparent=!0,this.mat.depthTest=!0,this.mat.depthWrite=!1,this.mesh=new THREE.PointCloud(this.geo,this.mat),this.mesh.frustumCulled=!1,o.add(this.mesh)},w.update=function(e,t){this.mat.uniforms.uTime.value=t};var P=function(){Mousetrap.bind("r",h.reset),Mousetrap.bind("d",function(){E=!E}),Mousetrap.bind("s",function(){v.enabled=!v.enabled})};this.setChannels=function(e){for(var t=0,n=0,r=y.w*y.h;n<r;n++)y.data[n]=(1-t)*e[n]+t*y.data[n];var i=new THREE.DataTexture(y.data,y.w,y.h,THREE.LuminanceFormat);i.minFilter=THREE.LinearFilter,i.magFilter=THREE.LinearFilter,i.wrapS=THREE.ClampToEdgeWrapping,i.wrapT=THREE.ClampToEdgeWrapping,i.needsUpdate=!0,y.texture=i,s.uniforms.tChannels.value=i,c.material.uniforms.tChannels.value=i},M(),t.start()},function(){var e=new nop.App;window.app=e,e.setChannels([]);var t=function(t){console.log("Mic Allowed"),window.persistAudioStream=t;var n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i),i.fftSize=64;var o=new Uint8Array(i.frequencyBinCount),a=function(){requestAnimationFrame(a),i.getByteFrequencyData(o),e.setChannels(o)};a()},n=function(e){console.log(e)},r=function(){window.navigator=window.navigator||{},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||null,navigator.getUserMedia({audio:!0},t,n)};r()}();